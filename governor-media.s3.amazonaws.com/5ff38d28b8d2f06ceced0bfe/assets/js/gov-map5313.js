var GovMap=function(t){var e={};function i(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s="./src/index.js")}({"./src/index.js":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}();function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.GovMap=function(){function t(e,i){if(n(this,t),!google||!google.maps)throw"google maps must be loaded to use Governor Maps";if(!i)throw"no map configuration was supplied";if(this.elem=document.querySelector(e),this.options=i,!this.elem)throw"no element found using the provided selector: "+e;this.init()}return o(t,[{key:"init",value:function(){this.defineInfoBoxClass(),this.config=Object.assign({},this.defaults,this.options),this.config.customPopup&&(this.popupTemplateElement=document.getElementById(this.config.customPopup)),this.bounds=new google.maps.LatLngBounds,this._mapInstance=this.buildMap(this.elem,this.options),this._kmlLayers=this.setupKmls(this._mapInstance),this._markerInstances=this.setupMarkers(this._mapInstance),this.config.fitBounds&&this._mapInstance.fitBounds(this.bounds)}},{key:"showMarkersByType",value:function(t){var e=this;this._markerInstances.forEach(function(i){i.type===t&&i.setMap(e._mapInstance)})}},{key:"buildMap",value:function(t,e){return new google.maps.Map(t,{zoom:e.zoom,center:{lat:e.center.lat,lng:e.center.lng}})}},{key:"buildMarker",value:function(t,e){var i=this,o=void 0;if(t.type&&(t.icon=t.type.icon),o=this.placeMarker(t,e,t.type.scaledSize),t.showInfoBox)if(this.config.customPopup){var n=document.createElement("div"),s={image:t.image?"":"info-block-hide",name:t.name?"":"info-block-hide",address:t.address?"":"info-block-hide",phone:t.phone?"":"info-block-hide",directions:t.directions?"":"info-block-hide",url:t.url?"":"info-block-hide"};n.innerHTML='\n                    <div class="map-popup">\n                        <div class="sub-row">\n                            <div class="image-holder '+s.image+'">\n                                <img src="'+t.image.cdnCropUrl+'" alt="image description">\n                            </div>\n                            <div class="text-box">\n                                <strong class="'+s.name+'">'+t.name+'</strong>\n                                <address class="'+s.address+'">'+t.address+'</address>\n                                <div class="phone-row '+s.phone+'">\n                                    <a href="tel:'+t.phone+'" class="phone">'+t.phone+'</a>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="sub-row sub-row-button">\n                            <a target="_blank" href="'+t.directions+'" class="btn '+s.directions+' btn-primary">directions</a>\n                            <a target="_blank" href="'+t.url+'" class="btn '+s.url+' btn-primary">Learn More</a>\n                        </div>\n                    </div>\n                ',o.infoWindow=this.createInfoBox({content:n,disableAutoPan:!1,maxWidth:0,zIndex:null,boxStyle:{width:"180px"},closeBoxMargin:"10px 2px 2px 2px",closeBoxURL:"http://www.google.com/intl/en_us/mapfiles/close.gif",infoBoxClearance:new google.maps.Size(1,1),isHidden:!1,pane:"floatPane",enableEventPropagation:!1})}else o.infoWindow=this.createInfoWindow(t.content);return o.addListener("click",function(){i.closeInfoWindows(),t.showInfoBox&&o.infoWindow&&o.infoWindow.open(i._mapInstance,o)}),o}},{key:"closeInfoWindows",value:function(){this._markerInstances.forEach(function(t){t&&t.infoWindow&&t.infoWindow.close&&t.infoWindow.close()})}},{key:"createInfoWindow",value:function(t){return new google.maps.InfoWindow({content:t})}},{key:"createInfoBox",value:function(t){return new this.InfoBox(t)}},{key:"createPopup",value:function(t,e){return console.log("templateElement: ",e),new this.Popup(new google.maps.LatLng(t.lat,t.lng),e)}},{key:"definePopupClass",value:function(){this.Popup=function(t){function e(t,i){n(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));o.position=t,i.classList.add("popup-bubble-content");var s=document.createElement("div");return s.classList.add("popup-bubble-anchor"),s.appendChild(i),o.anchor=document.createElement("div"),o.anchor.classList.add("popup-tip-anchor"),o.anchor.appendChild(s),o.stopEventPropagation(),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,google.maps.OverlayView),o(e,[{key:"onAdd",value:function(){this.getPanes().floatPane.appendChild(this.anchor)}},{key:"onRemove",value:function(){this.anchor.parentElement&&this.anchor.parentElement.removeChild(this.anchor)}},{key:"draw",value:function(){var t=this.getProjection().fromLatLngToDivPixel(this.position),e=Math.abs(t.x)<4e3&&Math.abs(t.y)<4e3?"block":"none";"block"===e&&(this.anchor.style.left=t.x+"px",this.anchor.style.top=t.y+"px"),this.anchor.style.display!==e&&(this.anchor.style.display=e)}},{key:"stopEventPropagation",value:function(){var t=this.anchor;t.style.cursor="auto",["click","dblclick","contextmenu","wheel","mousedown","touchstart","pointerdown"].forEach(function(e){t.addEventListener(e,function(t){t.stopPropagation()})})}}]),e}()}},{key:"defineInfoBoxClass",value:function(){
/*!
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *       http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
var t=function(t){t=t||{},google.maps.OverlayView.apply(this,arguments),this.content_=t.content||"",this.disableAutoPan_=t.disableAutoPan||!1,this.maxWidth_=t.maxWidth||0,this.pixelOffset_=t.pixelOffset||new google.maps.Size(0,0),this.position_=t.position||new google.maps.LatLng(0,0),this.zIndex_=t.zIndex||null,this.boxClass_=t.boxClass||"infoBox",this.boxStyle_=t.boxStyle||{},this.closeBoxMargin_=t.closeBoxMargin||"2px",this.closeBoxURL_=t.closeBoxURL||"//www.google.com/intl/en_us/mapfiles/close.gif",""===t.closeBoxURL&&(this.closeBoxURL_=""),this.closeBoxTitle_=t.closeBoxTitle||" Close ",this.infoBoxClearance_=t.infoBoxClearance||new google.maps.Size(1,1),void 0===t.visible&&(void 0===t.isHidden?t.visible=!0:t.visible=!t.isHidden),this.isHidden_=!t.visible,this.alignBottom_=t.alignBottom||!1,this.pane_=t.pane||"floatPane",this.enableEventPropagation_=t.enableEventPropagation||!1,this.div_=null,this.closeListener_=null,this.moveListener_=null,this.contextListener_=null,this.eventListeners_=null,this.fixedWidthSet_=null};(t.prototype=new google.maps.OverlayView).createInfoBoxDiv_=function(){var t,e,i,o=this,n=function(t){t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()};if(!this.div_){if(this.div_=document.createElement("div"),this.setBoxStyle_(),void 0===this.content_.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+this.content_:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(this.content_)),this.getPanes()[this.pane_].appendChild(this.div_),this.addClickHandler_(),this.div_.style.width?this.fixedWidthSet_=!0:0!==this.maxWidth_&&this.div_.offsetWidth>this.maxWidth_?(this.div_.style.width=this.maxWidth_,this.div_.style.overflow="auto",this.fixedWidthSet_=!0):(i=this.getBoxWidths_(),this.div_.style.width=this.div_.offsetWidth-i.left-i.right+"px",this.fixedWidthSet_=!1),this.panBox_(this.disableAutoPan_),!this.enableEventPropagation_){for(this.eventListeners_=[],e=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],t=0;t<e.length;t++)this.eventListeners_.push(google.maps.event.addDomListener(this.div_,e[t],n));this.eventListeners_.push(google.maps.event.addDomListener(this.div_,"mouseover",function(t){this.style.cursor="default"}))}this.contextListener_=google.maps.event.addDomListener(this.div_,"contextmenu",function(t){t.returnValue=!1,t.preventDefault&&t.preventDefault(),o.enableEventPropagation_||n(t)}),google.maps.event.trigger(this,"domready")}},t.prototype.getCloseBoxImg_=function(){var t="";return""!==this.closeBoxURL_&&(t="<img",t+=" src='"+this.closeBoxURL_+"'",t+=" align=right",t+=" title='"+this.closeBoxTitle_+"'",t+=" style='",t+=" position: relative;",t+=" cursor: pointer;",t+=" margin: "+this.closeBoxMargin_+";",t+="'>"),t},t.prototype.addClickHandler_=function(){var t;""!==this.closeBoxURL_?(t=this.div_.firstChild,this.closeListener_=google.maps.event.addDomListener(t,"click",this.getCloseClickHandler_())):this.closeListener_=null},t.prototype.getCloseClickHandler_=function(){var t=this;return function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(t,"closeclick"),t.close()}},t.prototype.panBox_=function(t){var e,i=0,o=0;if(!t&&(e=this.getMap())instanceof google.maps.Map){e.getBounds().contains(this.position_)||e.setCenter(this.position_);var n=this.pixelOffset_.width,s=this.pixelOffset_.height,r=this.div_.offsetWidth,a=this.div_.offsetHeight,l=this.infoBoxClearance_.width,h=this.infoBoxClearance_.height;if(2==e.panToBounds.length){var d={left:0,right:0,top:0,bottom:0};d.left=-n+l,d.right=n+r+l,this.alignBottom_?(d.top=-s+h+a,d.bottom=s+h):(d.top=-s+h,d.bottom=s+a+h),e.panToBounds(new google.maps.LatLngBounds(this.position_),d)}else{var c=e.getDiv(),p=c.offsetWidth,u=c.offsetHeight,f=this.getProjection().fromLatLngToContainerPixel(this.position_);if(f.x<-n+l?i=f.x+n-l:f.x+r+n+l>p&&(i=f.x+r+n+l-p),this.alignBottom_?f.y<-s+h+a?o=f.y+s-h-a:f.y+s+h>u&&(o=f.y+s+h-u):f.y<-s+h?o=f.y+s-h:f.y+a+s+h>u&&(o=f.y+a+s+h-u),0!==i||0!==o){e.getCenter();e.panBy(i,o)}}}},t.prototype.setBoxStyle_=function(){var t,e;if(this.div_){for(t in this.div_.className=this.boxClass_,this.div_.style.cssText="",e=this.boxStyle_)e.hasOwnProperty(t)&&(this.div_.style[t]=e[t]);(void 0===this.div_.style.WebkitTransform||-1===this.div_.style.WebkitTransform.indexOf("translateZ")&&-1===this.div_.style.WebkitTransform.indexOf("matrix"))&&(this.div_.style.WebkitTransform="translateZ(0)"),void 0!==this.div_.style.opacity&&""!==this.div_.style.opacity&&(this.div_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+100*this.div_.style.opacity+')"',this.div_.style.filter="alpha(opacity="+100*this.div_.style.opacity+")"),this.div_.style.position="absolute",this.div_.style.visibility="hidden",null!==this.zIndex_&&(this.div_.style.zIndex=this.zIndex_)}},t.prototype.getBoxWidths_=function(){var t,e={top:0,bottom:0,left:0,right:0},i=this.div_;return document.defaultView&&document.defaultView.getComputedStyle?(t=i.ownerDocument.defaultView.getComputedStyle(i,""))&&(e.top=parseInt(t.borderTopWidth,10)||0,e.bottom=parseInt(t.borderBottomWidth,10)||0,e.left=parseInt(t.borderLeftWidth,10)||0,e.right=parseInt(t.borderRightWidth,10)||0):document.documentElement.currentStyle&&i.currentStyle&&(e.top=parseInt(i.currentStyle.borderTopWidth,10)||0,e.bottom=parseInt(i.currentStyle.borderBottomWidth,10)||0,e.left=parseInt(i.currentStyle.borderLeftWidth,10)||0,e.right=parseInt(i.currentStyle.borderRightWidth,10)||0),e},t.prototype.onRemove=function(){this.div_&&(this.div_.parentNode.removeChild(this.div_),this.div_=null)},t.prototype.draw=function(){this.createInfoBoxDiv_();var t=this.getProjection().fromLatLngToDivPixel(this.position_);this.div_.style.left=t.x+this.pixelOffset_.width+"px",this.alignBottom_?this.div_.style.bottom=-(t.y+this.pixelOffset_.height)+"px":this.div_.style.top=t.y+this.pixelOffset_.height+"px",this.isHidden_?this.div_.style.visibility="hidden":this.div_.style.visibility="visible"},t.prototype.setOptions=function(t){void 0!==t.boxClass&&(this.boxClass_=t.boxClass,this.setBoxStyle_()),void 0!==t.boxStyle&&(this.boxStyle_=t.boxStyle,this.setBoxStyle_()),void 0!==t.content&&this.setContent(t.content),void 0!==t.disableAutoPan&&(this.disableAutoPan_=t.disableAutoPan),void 0!==t.maxWidth&&(this.maxWidth_=t.maxWidth),void 0!==t.pixelOffset&&(this.pixelOffset_=t.pixelOffset),void 0!==t.alignBottom&&(this.alignBottom_=t.alignBottom),void 0!==t.position&&this.setPosition(t.position),void 0!==t.zIndex&&this.setZIndex(t.zIndex),void 0!==t.closeBoxMargin&&(this.closeBoxMargin_=t.closeBoxMargin),void 0!==t.closeBoxURL&&(this.closeBoxURL_=t.closeBoxURL),void 0!==t.closeBoxTitle&&(this.closeBoxTitle_=t.closeBoxTitle),void 0!==t.infoBoxClearance&&(this.infoBoxClearance_=t.infoBoxClearance),void 0!==t.isHidden&&(this.isHidden_=t.isHidden),void 0!==t.visible&&(this.isHidden_=!t.visible),void 0!==t.enableEventPropagation&&(this.enableEventPropagation_=t.enableEventPropagation),this.div_&&this.draw()},t.prototype.setContent=function(t){this.content_=t,this.div_&&(this.closeListener_&&(google.maps.event.removeListener(this.closeListener_),this.closeListener_=null),this.fixedWidthSet_||(this.div_.style.width=""),void 0===t.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+t:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(t)),this.fixedWidthSet_||(this.div_.style.width=this.div_.offsetWidth+"px",void 0===t.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+t:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(t))),this.addClickHandler_()),google.maps.event.trigger(this,"content_changed")},t.prototype.setPosition=function(t){this.position_=t,this.div_&&this.draw(),google.maps.event.trigger(this,"position_changed")},t.prototype.setZIndex=function(t){this.zIndex_=t,this.div_&&(this.div_.style.zIndex=t),google.maps.event.trigger(this,"zindex_changed")},t.prototype.setVisible=function(t){this.isHidden_=!t,this.div_&&(this.div_.style.visibility=this.isHidden_?"hidden":"visible")},t.prototype.getContent=function(){return this.content_},t.prototype.getPosition=function(){return this.position_},t.prototype.getZIndex=function(){return this.zIndex_},t.prototype.getVisible=function(){return void 0!==this.getMap()&&null!==this.getMap()&&!this.isHidden_},t.prototype.getWidth=function(){var t=null;return this.div_&&(t=this.div_.offsetWidth),t},t.prototype.getHeight=function(){var t=null;return this.div_&&(t=this.div_.offsetHeight),t},t.prototype.show=function(){this.isHidden_=!1,this.div_&&(this.div_.style.visibility="visible")},t.prototype.hide=function(){this.isHidden_=!0,this.div_&&(this.div_.style.visibility="hidden")},t.prototype.open=function(t,e){var i=this;e&&(this.setPosition(e.getPosition()),this.moveListener_=google.maps.event.addListener(e,"position_changed",function(){i.setPosition(this.getPosition())})),this.setMap(t),this.div_&&this.panBox_(this.disableAutoPan_)},t.prototype.close=function(){var t;if(this.closeListener_&&(google.maps.event.removeListener(this.closeListener_),this.closeListener_=null),this.eventListeners_){for(t=0;t<this.eventListeners_.length;t++)google.maps.event.removeListener(this.eventListeners_[t]);this.eventListeners_=null}this.moveListener_&&(google.maps.event.removeListener(this.moveListener_),this.moveListener_=null),this.contextListener_&&(google.maps.event.removeListener(this.contextListener_),this.contextListener_=null),this.setMap(null)},this.InfoBox=t}},{key:"focusMarker",value:function(t){var e=this._markerInstances.find(function(e){return e.id===t});e&&this._mapInstance.panTo(e.position)}},{key:"getIconConfig",value:function(t){return{title:t.name,url:t.icon,scaledSize:new google.maps.Size(35,35)}}},{key:"getKMLs",value:function(){return this.options._kmlLayers}},{key:"getMarkers",value:function(){return this.options.markers}},{key:"getMarkerInstances",value:function(){return this._markerInstances}},{key:"getMarkerTypes",value:function(){var t={};return this.options.markers.forEach(function(e){t[e.type._id]||(t[e.type._id]=e.type)}),t}},{key:"hideMarkersByType",value:function(t){this._markerInstances.forEach(function(e){e.type===t&&e.setMap(null)})}},{key:"placeMarker",value:function(t,e){var i={title:t.name,position:t.location,type:t.type._id,id:t._id,map:e};if(t.icon){var o=this.getIconConfig(t);i.icon=o,t.type&&t.type.scaledSize&&(i.scaledSize=t.type.scaledSize)}return new google.maps.Marker(i)}},{key:"setupKmls",value:function(t){var e=[],i=void 0;return this.config.kmls.forEach(function(o){o&&(i=new google.maps.KmlLayer({url:o.kmlFile,map:t,preserveViewport:!0,name:o.name}),e.push(i))}),e}},{key:"setupMarkers",value:function(t){var e=this,i=[],o=void 0;return this.config.markers.forEach(function(n){n.show&&(o=e.buildMarker(n,t),e.bounds.extend(o.getPosition()),i.push(o))}),i}},{key:"setVisibleMarkersByType",value:function(t){var e=this,i=new google.maps.LatLngBounds;t.length?this._markerInstances.forEach(function(o){t.includes(o.type)?(o.setMap(e._mapInstance),i.extend(o.getPosition())):o.setMap(null),e._mapInstance.fitBounds(i)}):this.showAllMarkers()}},{key:"showAllMarkers",value:function(){var t=this;this._markerInstances.forEach(function(e){e.setMap(t._mapInstance)})}}]),t}()}}).GovMap;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Hb3ZNYXAvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vR292TWFwLy4vc3JjL2luZGV4LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsInZhbHVlIiwibiIsIl9fZXNNb2R1bGUiLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJHb3ZNYXAiLCJzZWxlY3RvciIsIm9wdGlvbnMiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiZ29vZ2xlIiwibWFwcyIsImVsZW0iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpbml0IiwiZGVmaW5lSW5mb0JveENsYXNzIiwiY29uZmlnIiwiYXNzaWduIiwiZGVmYXVsdHMiLCJjdXN0b21Qb3B1cCIsInBvcHVwVGVtcGxhdGVFbGVtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJib3VuZHMiLCJMYXRMbmdCb3VuZHMiLCJfbWFwSW5zdGFuY2UiLCJidWlsZE1hcCIsIl9rbWxMYXllcnMiLCJzZXR1cEttbHMiLCJfbWFya2VySW5zdGFuY2VzIiwic2V0dXBNYXJrZXJzIiwiZml0Qm91bmRzIiwidHlwZUlkIiwiX3RoaXMiLCJmb3JFYWNoIiwibWFya2VyIiwidHlwZSIsInNldE1hcCIsIk1hcCIsInpvb20iLCJjZW50ZXIiLCJsYXQiLCJsbmciLCJtYXAiLCJfdGhpczIiLCJtYXJrZXJJbnN0YW5jZSIsImljb24iLCJwbGFjZU1hcmtlciIsInNjYWxlZFNpemUiLCJzaG93SW5mb0JveCIsImluZm9Cb3giLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NlcyIsImltYWdlIiwiYWRkcmVzcyIsInBob25lIiwiZGlyZWN0aW9ucyIsInVybCIsImlubmVySFRNTCIsImNkbkNyb3BVcmwiLCJpbmZvV2luZG93IiwiY3JlYXRlSW5mb0JveCIsImNvbnRlbnQiLCJkaXNhYmxlQXV0b1BhbiIsIm1heFdpZHRoIiwiekluZGV4IiwiYm94U3R5bGUiLCJ3aWR0aCIsImNsb3NlQm94TWFyZ2luIiwiY2xvc2VCb3hVUkwiLCJpbmZvQm94Q2xlYXJhbmNlIiwiU2l6ZSIsImlzSGlkZGVuIiwicGFuZSIsImVuYWJsZUV2ZW50UHJvcGFnYXRpb24iLCJjcmVhdGVJbmZvV2luZG93IiwiYWRkTGlzdGVuZXIiLCJjbG9zZUluZm9XaW5kb3dzIiwib3BlbiIsImNsb3NlIiwiSW5mb1dpbmRvdyIsIkluZm9Cb3giLCJsb2NhdGlvbiIsInRlbXBsYXRlRWxlbWVudCIsImNvbnNvbGUiLCJsb2ciLCJQb3B1cCIsIkxhdExuZyIsIl9nb29nbGUkbWFwcyRPdmVybGF5ViIsInBvc2l0aW9uIiwiX3RoaXMzIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJfX3Byb3RvX18iLCJnZXRQcm90b3R5cGVPZiIsImNsYXNzTGlzdCIsImFkZCIsInBpeGVsT2Zmc2V0IiwiYXBwZW5kQ2hpbGQiLCJhbmNob3IiLCJzdG9wRXZlbnRQcm9wYWdhdGlvbiIsIl9pbmhlcml0cyIsIk92ZXJsYXlWaWV3IiwiX2NyZWF0ZUNsYXNzIiwia2V5IiwiZ2V0UGFuZXMiLCJmbG9hdFBhbmUiLCJwYXJlbnRFbGVtZW50IiwicmVtb3ZlQ2hpbGQiLCJkaXZQb3NpdGlvbiIsImdldFByb2plY3Rpb24iLCJmcm9tTGF0TG5nVG9EaXZQaXhlbCIsImRpc3BsYXkiLCJNYXRoIiwiYWJzIiwieCIsInkiLCJzdHlsZSIsImxlZnQiLCJ0b3AiLCJjdXJzb3IiLCJldmVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwic3RvcFByb3BhZ2F0aW9uIiwib3B0X29wdHMiLCJhcHBseSIsImFyZ3VtZW50cyIsImNvbnRlbnRfIiwiZGlzYWJsZUF1dG9QYW5fIiwibWF4V2lkdGhfIiwicGl4ZWxPZmZzZXRfIiwicG9zaXRpb25fIiwiekluZGV4XyIsImJveENsYXNzXyIsImJveENsYXNzIiwiYm94U3R5bGVfIiwiY2xvc2VCb3hNYXJnaW5fIiwiY2xvc2VCb3hVUkxfIiwiY2xvc2VCb3hUaXRsZV8iLCJjbG9zZUJveFRpdGxlIiwiaW5mb0JveENsZWFyYW5jZV8iLCJ2aXNpYmxlIiwiaXNIaWRkZW5fIiwiYWxpZ25Cb3R0b21fIiwiYWxpZ25Cb3R0b20iLCJwYW5lXyIsImVuYWJsZUV2ZW50UHJvcGFnYXRpb25fIiwiZGl2XyIsImNsb3NlTGlzdGVuZXJfIiwibW92ZUxpc3RlbmVyXyIsImNvbnRleHRMaXN0ZW5lcl8iLCJldmVudExpc3RlbmVyc18iLCJmaXhlZFdpZHRoU2V0XyIsImNyZWF0ZUluZm9Cb3hEaXZfIiwiZXZlbnRzIiwiYnciLCJtZSIsImNhbmNlbEhhbmRsZXIiLCJjYW5jZWxCdWJibGUiLCJzZXRCb3hTdHlsZV8iLCJub2RlVHlwZSIsImdldENsb3NlQm94SW1nXyIsImFkZENsaWNrSGFuZGxlcl8iLCJvZmZzZXRXaWR0aCIsIm92ZXJmbG93IiwiZ2V0Qm94V2lkdGhzXyIsInJpZ2h0IiwicGFuQm94XyIsImxlbmd0aCIsInB1c2giLCJhZGREb21MaXN0ZW5lciIsInJldHVyblZhbHVlIiwicHJldmVudERlZmF1bHQiLCJ0cmlnZ2VyIiwiaW1nIiwiY2xvc2VCb3giLCJmaXJzdENoaWxkIiwiZ2V0Q2xvc2VDbGlja0hhbmRsZXJfIiwiZGlzYWJsZVBhbiIsInhPZmZzZXQiLCJ5T2Zmc2V0IiwiZ2V0TWFwIiwiZ2V0Qm91bmRzIiwiY29udGFpbnMiLCJzZXRDZW50ZXIiLCJpd09mZnNldFgiLCJpd09mZnNldFkiLCJoZWlnaHQiLCJpd1dpZHRoIiwiaXdIZWlnaHQiLCJvZmZzZXRIZWlnaHQiLCJwYWRYIiwicGFkWSIsInBhblRvQm91bmRzIiwicGFkZGluZyIsImJvdHRvbSIsIm1hcERpdiIsImdldERpdiIsIm1hcFdpZHRoIiwibWFwSGVpZ2h0IiwicGl4UG9zaXRpb24iLCJmcm9tTGF0TG5nVG9Db250YWluZXJQaXhlbCIsImdldENlbnRlciIsInBhbkJ5IiwiY2xhc3NOYW1lIiwiY3NzVGV4dCIsIldlYmtpdFRyYW5zZm9ybSIsImluZGV4T2YiLCJvcGFjaXR5IiwiTXNGaWx0ZXIiLCJmaWx0ZXIiLCJ2aXNpYmlsaXR5IiwiY29tcHV0ZWRTdHlsZSIsImJveCIsImRlZmF1bHRWaWV3IiwiZ2V0Q29tcHV0ZWRTdHlsZSIsIm93bmVyRG9jdW1lbnQiLCJwYXJzZUludCIsImJvcmRlclRvcFdpZHRoIiwiYm9yZGVyQm90dG9tV2lkdGgiLCJib3JkZXJMZWZ0V2lkdGgiLCJib3JkZXJSaWdodFdpZHRoIiwiZG9jdW1lbnRFbGVtZW50IiwiY3VycmVudFN0eWxlIiwib25SZW1vdmUiLCJwYXJlbnROb2RlIiwiZHJhdyIsInNldE9wdGlvbnMiLCJzZXRDb250ZW50Iiwic2V0UG9zaXRpb24iLCJzZXRaSW5kZXgiLCJyZW1vdmVMaXN0ZW5lciIsImxhdGxuZyIsImluZGV4Iiwic2V0VmlzaWJsZSIsImlzVmlzaWJsZSIsImdldENvbnRlbnQiLCJnZXRQb3NpdGlvbiIsImdldFpJbmRleCIsImdldFZpc2libGUiLCJnZXRXaWR0aCIsImdldEhlaWdodCIsInNob3ciLCJoaWRlIiwibWFya2VySWQiLCJtYXJrZXJUb0ZvY3VzIiwiZmluZCIsImlkIiwicGFuVG8iLCJ0aXRsZSIsIm1hcmtlcnMiLCJtYXJrZXJUeXBlcyIsIl9pZCIsImdldEljb25Db25maWciLCJNYXJrZXIiLCJrbWxMYXllcnMiLCJjdXJyZW50TGF5ZXIiLCJrbWxzIiwiY3VycmVudEttbCIsIkttbExheWVyIiwia21sRmlsZSIsInByZXNlcnZlVmlld3BvcnQiLCJfdGhpczQiLCJtYXJrZXJJbnN0YW5jZXMiLCJidWlsZE1hcmtlciIsImV4dGVuZCIsInZpc2libGVUeXBlSWRzIiwiX3RoaXM1IiwibmV3Qm91bmRz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dUNBU0VwTixHQUFLLElBQUEyTixFQUFBN1AsS0FDUjhQLEtBQ0YxTixTQWNKLE9BYkFwQyxLQUFLUSxPQUFPeU8sUUFBUXhOLFFBQVEsU0FBQUMsR0FDcEJBLEVBQU8rTSxPQUVQck0sRUFBaUJ5TixFQUFLRSxZQUFZck8sRUFBUVEsR0FJMUMyTixFQUFLL08sT0FBT2tQLE9BQU81TixFQUFlZ00sZUFHbEMwQixFQUFnQjlGLEtBQUs1SCxNQUd0QjBOLGtEQVFhRyxHQUFnQixJQUFBQyxFQUFBbFEsS0FDOUJtUSxFQUFZLElBQUlsUSxPQUFPQyxLQUFLYSxhQUM5QmtQLEVBQWVsRyxPQUNmL0osS0FBS29CLGlCQUFpQkssUUFBUSxTQUFBQyxHQUN0QnVPLEVBQWVHLFNBQVMxTyxFQUFPQyxPQUMvQkQsRUFBT0UsT0FBT3NPLEVBQUtsUCxjQUNuQm1QLEVBQVVILE9BQU90TyxFQUFPME0sZ0JBRXhCMU0sRUFBT0UsT0FBTyxNQUVsQnNPLEVBQUtsUCxhQUFhTSxVQUFVNk8sS0FJaENuUSxLQUFLcVEsMERBU0ksSUFBQUMsRUFBQXRRLEtBQ2JBLEtBQUtvQixpQkFBaUJLLFFBQVEsU0FBQUMsR0FDMUJBLEVBQU9FLE9BQU8wTyxFQUFLdFAiLCJmaWxlIjoiZ292LW1hcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gXCIuL3NyYy9pbmRleC5qc1wiKTtcbiIsIi8qKlxuICogQGRlc2NyaXB0aW9uIEdvdmVybm9yIGhlbHBlciBmb3Igc2V0dGluZyB1cCBnb29nbGUgbWFwcyB1c2luZyBnb3Zlcm5vciBtYXAgY29uZmlnc1xuICpcbiAqIEBjbGFzcyBHb3ZNYXBcbiAqL1xuZXhwb3J0IGNsYXNzIEdvdk1hcCB7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIEdvdk1hcC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3IgY3NzIHNlbGVjdG9yIG9mIHRoZSBlbGVtZW50IHRvIHVzZSBmb3IgdGhlIG1hcFxuICAgICAqIEBwYXJhbSB7YW55fSBvcHRpb25zIGdvdmVybm9yIG1hcHMgY29uZmlndXJhdGlvbiBvYmplY3RcbiAgICAgKiBAbWVtYmVyb2YgR292TWFwXG4gICAgICovXG4gICAgY29uc3RydWN0b3Ioc2VsZWN0b3IsIG9wdGlvbnMpIHtcblxuICAgICAgICAvLyBjaGVjayBmb3IgZ29vZ2xlXG4gICAgICAgIGlmICghZ29vZ2xlIHx8ICFnb29nbGUubWFwcykge1xuICAgICAgICAgICAgdGhyb3cgJ2dvb2dsZSBtYXBzIG11c3QgYmUgbG9hZGVkIHRvIHVzZSBHb3Zlcm5vciBNYXBzJ1xuICAgICAgICB9XG4gICAgICAgIC8vIG1ha2Ugc3VyZSB0aGUgbWFwIGNvbmZpZyBleGlzdHNcbiAgICAgICAgaWYgKCFvcHRpb25zKSB7XG4gICAgICAgICAgICB0aHJvdyAnbm8gbWFwIGNvbmZpZ3VyYXRpb24gd2FzIHN1cHBsaWVkJ1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZ3JhYiB0aGUgZWxlbWVudCB1c2luZyB0aGUgZWxlbWVudCBzZWxlY3RvclxuICAgICAgICB0aGlzLmVsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKVxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zXG5cbiAgICAgICAgLy8gbWFrZSBzdXJlIGFuIGVsZW1lbnQgd2FzIGZvdW5kXG4gICAgICAgIGlmICghdGhpcy5lbGVtKSB7XG4gICAgICAgICAgICB0aHJvdyBgbm8gZWxlbWVudCBmb3VuZCB1c2luZyB0aGUgcHJvdmlkZWQgc2VsZWN0b3I6ICR7c2VsZWN0b3J9YFxuICAgICAgICB9XG5cbiAgICAgICAgLy8gc2V0dXAgdGhlIG1hcFxuICAgICAgICB0aGlzLmluaXQoKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHVwIHRoZSBnb29nbGUgbWFwIHVzaW5nIHRoZSBnb3Zlcm5vciBtYXAgY29uZmlnXG4gICAgICogQG1lbWJlcm9mIEdvdk1hcFxuICAgICAqL1xuICAgIGluaXQoKSB7XG4gICAgICAgIC8vIHRoaXMuZGVmaW5lUG9wdXBDbGFzcygpO1xuICAgICAgICB0aGlzLmRlZmluZUluZm9Cb3hDbGFzcygpO1xuICAgICAgICB0aGlzLmNvbmZpZyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZGVmYXVsdHMsIHRoaXMub3B0aW9ucylcblxuICAgICAgICBpZiAodGhpcy5jb25maWcuY3VzdG9tUG9wdXApIHtcbiAgICAgICAgICAgIHRoaXMucG9wdXBUZW1wbGF0ZUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmNvbmZpZy5jdXN0b21Qb3B1cClcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYm91bmRzID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZ0JvdW5kcygpXG4gICAgICAgIHRoaXMuX21hcEluc3RhbmNlID0gdGhpcy5idWlsZE1hcCh0aGlzLmVsZW0sIHRoaXMub3B0aW9ucylcbiAgICAgICAgdGhpcy5fa21sTGF5ZXJzID0gdGhpcy5zZXR1cEttbHModGhpcy5fbWFwSW5zdGFuY2UpXG4gICAgICAgIHRoaXMuX21hcmtlckluc3RhbmNlcyA9IHRoaXMuc2V0dXBNYXJrZXJzKHRoaXMuX21hcEluc3RhbmNlKVxuXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5maXRCb3VuZHMpIHtcbiAgICAgICAgICAgIHRoaXMuX21hcEluc3RhbmNlLmZpdEJvdW5kcyh0aGlzLmJvdW5kcylcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBkZXNjcmlwdGlvbiBIaWRlIGFsbCBtYXJrZXJzIHdpdGggdGhlIHNwZWNpZmllZCBtYXJrZXIgdHlwZSBpZFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlSWQgLSB0aGUgaWQgb2YgdGhlIG1hcmtlciB0eXBlIHRvIHNob3dcbiAgICAgKiBAbWVtYmVyb2YgR292TWFwXG4gICAgICovXG4gICAgc2hvd01hcmtlcnNCeVR5cGUodHlwZUlkKSB7XG4gICAgICAgIHRoaXMuX21hcmtlckluc3RhbmNlcy5mb3JFYWNoKG1hcmtlciA9PiB7XG4gICAgICAgICAgICBpZiAobWFya2VyLnR5cGUgPT09IHR5cGVJZCkge1xuICAgICAgICAgICAgICAgIG1hcmtlci5zZXRNYXAodGhpcy5fbWFwSW5zdGFuY2UpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIGNyZWF0ZSBhIGdvb2dsZSBtYXAgaW5zdGFuY2UgdXNpbmcgdGhlIGdvdmVybm9yIG1hcCBjb25maWdcbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtIC0gdGhlIGVsZW1lbnQgdG8gdXNlIGZvciB0aGUgbWFwXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyAtIGdvb2dsZSBtYXAgY29uZmlndXJhdGlvbiBvYmplY3RcbiAgICAgKiBAcmV0dXJucyB7Z29vZ2xlLm1hcHMuTWFwfSBhIG5ld2x5IGNvbmZpZ3VyZWQgZ29vZ2xlIG1hcFxuICAgICAqIEBtZW1iZXJvZiBHb3ZNYXBcbiAgICAgKi9cbiAgICBidWlsZE1hcChlbGVtLCBjb25maWcpIHtcbiAgICAgICAgY29uc3QgbWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChlbGVtLCB7XG4gICAgICAgICAgICB6b29tOiBjb25maWcuem9vbSxcbiAgICAgICAgICAgIGNlbnRlcjogeyBsYXQ6IGNvbmZpZy5jZW50ZXIubGF0LCBsbmc6IGNvbmZpZy5jZW50ZXIubG5nIH1cbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIG1hcFxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBkZXNjcmlwdGlvbiBidWlsZCBhIGdvb2dsZSBtYXBzIG1hcmtlciBhbmRcbiAgICAgKiBhZGQgbGlzdGVuZXJzIGZvciB0aGUgaW5mbyB3aW5kb3dcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7YW55fSBtYXJrZXIgLSBnb3Zlcm5vciBtYXJrZXIgY29uZmlnXG4gICAgICogQHJldHVybnMge2dvb2dsZS5tYXBzLk1hcmtlcn0gLSBnb29nbGUgbWFwIGluc3RhbmNlXG4gICAgICogQG1lbWJlcm9mIEdvdk1hcFxuICAgICAqL1xuICAgIGJ1aWxkTWFya2VyKG1hcmtlciwgbWFwKSB7XG4gICAgICAgIGxldCBtYXJrZXJJbnN0YW5jZVxuXG4gICAgICAgIC8vIGlmIHRoZSBtYXJrZXIgaGFzIGEgbWFya2VyIHR5cGUgc2VsZWN0ZWQsIGdyYWIgaXQgc28gd2UgY2FuIHVzZSB0aGUgaWNvblxuICAgICAgICBpZiAobWFya2VyLnR5cGUpIHtcbiAgICAgICAgICAgIG1hcmtlci5pY29uID0gbWFya2VyLnR5cGUuaWNvblxuICAgICAgICB9XG5cbiAgICAgICAgLy8gY3JlYXRlIHRoZSBtYXJrZXIgYW5kIGFkZCBpdCB0byB0aGUgbWFwXG4gICAgICAgIG1hcmtlckluc3RhbmNlID0gdGhpcy5wbGFjZU1hcmtlcihtYXJrZXIsIG1hcCwgbWFya2VyLnR5cGUuc2NhbGVkU2l6ZSlcbiAgICAgICAgaWYgKG1hcmtlci5zaG93SW5mb0JveCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlnLmN1c3RvbVBvcHVwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5mb0JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgICAgICAgICAgY29uc3QgY2xhc3NlcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2U6ICghbWFya2VyLmltYWdlKSA/ICdpbmZvLWJsb2NrLWhpZGUnIDogJycsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICghbWFya2VyLm5hbWUpID8gJ2luZm8tYmxvY2staGlkZScgOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgYWRkcmVzczogKCFtYXJrZXIuYWRkcmVzcykgPyAnaW5mby1ibG9jay1oaWRlJyA6ICcnLFxuICAgICAgICAgICAgICAgICAgICBwaG9uZTogKCFtYXJrZXIucGhvbmUpID8gJ2luZm8tYmxvY2staGlkZScgOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uczogKCFtYXJrZXIuZGlyZWN0aW9ucykgPyAnaW5mby1ibG9jay1oaWRlJyA6ICcnLFxuICAgICAgICAgICAgICAgICAgICB1cmw6ICghbWFya2VyLnVybCkgPyAnaW5mby1ibG9jay1oaWRlJyA6ICcnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGluZm9Cb3guaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWFwLXBvcHVwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3ViLXJvd1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbWFnZS1ob2xkZXIgJHtjbGFzc2VzLmltYWdlfVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIiR7bWFya2VyLmltYWdlLmNkbkNyb3BVcmx9XCIgYWx0PVwiaW1hZ2UgZGVzY3JpcHRpb25cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGV4dC1ib3hcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0cm9uZyBjbGFzcz1cIiR7Y2xhc3Nlcy5uYW1lfVwiPiR7bWFya2VyLm5hbWV9PC9zdHJvbmc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhZGRyZXNzIGNsYXNzPVwiJHtjbGFzc2VzLmFkZHJlc3N9XCI+JHttYXJrZXIuYWRkcmVzc308L2FkZHJlc3M+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwaG9uZS1yb3cgJHtjbGFzc2VzLnBob25lfVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cInRlbDoke21hcmtlci5waG9uZX1cIiBjbGFzcz1cInBob25lXCI+JHttYXJrZXIucGhvbmV9PC9hPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInN1Yi1yb3cgc3ViLXJvdy1idXR0b25cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSB0YXJnZXQ9XCJfYmxhbmtcIiBocmVmPVwiJHttYXJrZXIuZGlyZWN0aW9uc31cIiBjbGFzcz1cImJ0biAke2NsYXNzZXMuZGlyZWN0aW9uc30gYnRuLXByaW1hcnlcIj5kaXJlY3Rpb25zPC9hPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIHRhcmdldD1cIl9ibGFua1wiIGhyZWY9XCIke21hcmtlci51cmx9XCIgY2xhc3M9XCJidG4gJHtjbGFzc2VzLnVybH0gYnRuLXByaW1hcnlcIj5MZWFybiBNb3JlPC9hPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIGBcbiAgICAgICAgICAgICAgICBtYXJrZXJJbnN0YW5jZS5pbmZvV2luZG93ID0gdGhpcy5jcmVhdGVJbmZvQm94KHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogaW5mb0JveCxcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZUF1dG9QYW46IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtYXhXaWR0aDogMCxcbiAgICAgICAgICAgICAgICAgICAgekluZGV4OiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBib3hTdHlsZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICcxODBweCdcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VCb3hNYXJnaW46IFwiMTBweCAycHggMnB4IDJweFwiLFxuICAgICAgICAgICAgICAgICAgICBjbG9zZUJveFVSTDogXCJodHRwOi8vd3d3Lmdvb2dsZS5jb20vaW50bC9lbl91cy9tYXBmaWxlcy9jbG9zZS5naWZcIixcbiAgICAgICAgICAgICAgICAgICAgaW5mb0JveENsZWFyYW5jZTogbmV3IGdvb2dsZS5tYXBzLlNpemUoMSwgMSksXG4gICAgICAgICAgICAgICAgICAgIGlzSGlkZGVuOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgcGFuZTogXCJmbG9hdFBhbmVcIixcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlRXZlbnRQcm9wYWdhdGlvbjogZmFsc2VcbiAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG1hcmtlckluc3RhbmNlLmluZm9XaW5kb3cgPSB0aGlzLmNyZWF0ZUluZm9XaW5kb3cobWFya2VyLmNvbnRlbnQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGFkZCBhIGNsaWNrIGhhbmRsZXIgZm9yIHNlbGVjdGluZyB0aGUgbWFya2VyLCBhcyB3ZWxsIGFzIHNob3dpbmcgdGhlIGluZm8gd2luZG93XG4gICAgICAgIG1hcmtlckluc3RhbmNlLmFkZExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VJbmZvV2luZG93cygpXG5cbiAgICAgICAgICAgIGlmIChtYXJrZXIuc2hvd0luZm9Cb3ggJiYgbWFya2VySW5zdGFuY2UuaW5mb1dpbmRvdykge1xuICAgICAgICAgICAgICAgIG1hcmtlckluc3RhbmNlLmluZm9XaW5kb3cub3Blbih0aGlzLl9tYXBJbnN0YW5jZSwgbWFya2VySW5zdGFuY2UpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgICAgcmV0dXJuIG1hcmtlckluc3RhbmNlXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIGNsb3NlIGFsbCBvcGVuIGluZm8gd2luZG93c1xuICAgICAqIEBtZW1iZXJvZiBHb3ZNYXBcbiAgICAgKi9cbiAgICBjbG9zZUluZm9XaW5kb3dzKCkge1xuICAgICAgICB0aGlzLl9tYXJrZXJJbnN0YW5jZXMuZm9yRWFjaChtYXJrZXIgPT4ge1xuICAgICAgICAgICAgaWYgKG1hcmtlciAmJiBtYXJrZXIuaW5mb1dpbmRvdyAmJiBtYXJrZXIuaW5mb1dpbmRvdy5jbG9zZSkge1xuICAgICAgICAgICAgICAgIG1hcmtlci5pbmZvV2luZG93LmNsb3NlKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZGVzY3JpcHRpb24gY3JlYXRlIGEgZ29vZ2xlIG1hcHMgaW5mbyB3aW5kb3cgdXNpbmcgdGhlIGNvbnRlbnQgcGFzc2VkIGluXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGNvbnRlbnQgLSBDb250ZW50IHRvIGJlIGRpc3BsYXllZCBpbiB0aGUgaW5mbyB3aW5kb3dcbiAgICAgKiBAcmV0dXJucyB7Z29vZ2xlLm1hcHMuSW5mb1dpbmRvd30gLSBnb29nbGUgbWFwcyBJbmZvV2luZG93XG4gICAgICogQG1lbWJlcm9mIEdvdk1hcFxuICAgICAqL1xuICAgIGNyZWF0ZUluZm9XaW5kb3coY29udGVudCkge1xuICAgICAgICByZXR1cm4gbmV3IGdvb2dsZS5tYXBzLkluZm9XaW5kb3coe1xuICAgICAgICAgICAgY29udGVudDogY29udGVudFxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGNyZWF0ZUluZm9Cb3gob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gbmV3IHRoaXMuSW5mb0JveChvcHRpb25zKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZGVzY3JpcHRpb24gY3JlYXRlIGEgY3VzdG9tIHBvcHVwIHdpbmRvdyB1c2luZyB0aGUgY29udGVudCBwYXNzZWQgaW5cbiAgICAgKiAqIEBwYXJhbSB7T2JqZWN0fSBwb3NpdGlvbiAtIHRoZSBsYXQgYW5kIGxuZyBvZiB0aGUgXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGVtcGxhdGVFbGVtZW50IC0gVGhlIGVsZW1lbnQgdG8gdXNlIGFzIHRoZSB0ZW1wbGF0ZVxuICAgICAqIEByZXR1cm5zIHtQb3B1cH0gLSBnb29nbGUgbWFwcyBJbmZvV2luZG93XG4gICAgICogQG1lbWJlcm9mIEdvdk1hcFxuICAgICAqL1xuICAgIGNyZWF0ZVBvcHVwKGxvY2F0aW9uLCB0ZW1wbGF0ZUVsZW1lbnQpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ3RlbXBsYXRlRWxlbWVudDogJywgdGVtcGxhdGVFbGVtZW50KVxuICAgICAgICByZXR1cm4gbmV3IHRoaXMuUG9wdXAoXG4gICAgICAgICAgICBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGxvY2F0aW9uLmxhdCwgbG9jYXRpb24ubG5nKSxcbiAgICAgICAgICAgIHRlbXBsYXRlRWxlbWVudFxuICAgICAgICApXG4gICAgfVxuICAgIC8qKiBEZWZpbmVzIHRoZSBQb3B1cCBjbGFzcy4gKi9cbiAgICAvLyBOT1RFOiBnb29nbGUubWFwcy5PdmVybGF5VmlldyBpcyBvbmx5IGRlZmluZWQgb25jZSB0aGUgTWFwcyBBUEkgaGFzXG4gICAgLy8gbG9hZGVkLiBUaGF0IGlzIHdoeSBQb3B1cCBpcyBkZWZpbmVkIGluc2lkZSBpbml0TWFwKCkuXG4gICAgZGVmaW5lUG9wdXBDbGFzcygpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgY3VzdG9taXplZCBwb3B1cCBvbiB0aGUgbWFwLlxuICAgICAgICAgKiBAcGFyYW0geyFnb29nbGUubWFwcy5MYXRMbmd9IHBvc2l0aW9uXG4gICAgICAgICAqIEBwYXJhbSB7IUVsZW1lbnR9IGNvbnRlbnRcbiAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAqIEBleHRlbmRzIHtnb29nbGUubWFwcy5PdmVybGF5Vmlld31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuUG9wdXAgPSBjbGFzcyBQb3B1cCBleHRlbmRzIGdvb2dsZS5tYXBzLk92ZXJsYXlWaWV3IHtcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yKHBvc2l0aW9uLCBjb250ZW50KSB7XG4gICAgICAgICAgICAgICAgc3VwZXIoKVxuICAgICAgICAgICAgICAgIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcblxuICAgICAgICAgICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LmFkZCgncG9wdXAtYnViYmxlLWNvbnRlbnQnKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHBpeGVsT2Zmc2V0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgcGl4ZWxPZmZzZXQuY2xhc3NMaXN0LmFkZCgncG9wdXAtYnViYmxlLWFuY2hvcicpO1xuICAgICAgICAgICAgICAgIHBpeGVsT2Zmc2V0LmFwcGVuZENoaWxkKGNvbnRlbnQpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5hbmNob3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFuY2hvci5jbGFzc0xpc3QuYWRkKCdwb3B1cC10aXAtYW5jaG9yJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5hbmNob3IuYXBwZW5kQ2hpbGQocGl4ZWxPZmZzZXQpO1xuXG4gICAgICAgICAgICAgICAgLy8gT3B0aW9uYWxseSBzdG9wIGNsaWNrcywgZXRjLiwgZnJvbSBidWJibGluZyB1cCB0byB0aGUgbWFwLlxuICAgICAgICAgICAgICAgIHRoaXMuc3RvcEV2ZW50UHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqIENhbGxlZCB3aGVuIHRoZSBwb3B1cCBpcyBhZGRlZCB0byB0aGUgbWFwLiAqL1xuICAgICAgICAgICAgb25BZGQoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRQYW5lcygpLmZsb2F0UGFuZS5hcHBlbmRDaGlsZCh0aGlzLmFuY2hvcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKiBDYWxsZWQgd2hlbiB0aGUgcG9wdXAgaXMgcmVtb3ZlZCBmcm9tIHRoZSBtYXAuICovXG4gICAgICAgICAgICBvblJlbW92ZSgpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hbmNob3IucGFyZW50RWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFuY2hvci5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMuYW5jaG9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKiBDYWxsZWQgd2hlbiB0aGUgcG9wdXAgbmVlZHMgdG8gZHJhdyBpdHNlbGYuICovXG4gICAgICAgICAgICBkcmF3KCkge1xuICAgICAgICAgICAgICAgIHZhciBkaXZQb3NpdGlvbiA9IHRoaXMuZ2V0UHJvamVjdGlvbigpLmZyb21MYXRMbmdUb0RpdlBpeGVsKHRoaXMucG9zaXRpb24pO1xuICAgICAgICAgICAgICAgIC8vIEhpZGUgdGhlIHBvcHVwIHdoZW4gaXQgaXMgZmFyIG91dCBvZiB2aWV3LlxuICAgICAgICAgICAgICAgIHZhciBkaXNwbGF5ID1cbiAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoZGl2UG9zaXRpb24ueCkgPCA0MDAwICYmIE1hdGguYWJzKGRpdlBvc2l0aW9uLnkpIDwgNDAwMCA/XG4gICAgICAgICAgICAgICAgICAgICAgICAnYmxvY2snIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICdub25lJztcblxuICAgICAgICAgICAgICAgIGlmIChkaXNwbGF5ID09PSAnYmxvY2snKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYW5jaG9yLnN0eWxlLmxlZnQgPSBkaXZQb3NpdGlvbi54ICsgJ3B4JztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbmNob3Iuc3R5bGUudG9wID0gZGl2UG9zaXRpb24ueSArICdweCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFuY2hvci5zdHlsZS5kaXNwbGF5ICE9PSBkaXNwbGF5KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYW5jaG9yLnN0eWxlLmRpc3BsYXkgPSBkaXNwbGF5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqIFN0b3BzIGNsaWNrcy9kcmFncyBmcm9tIGJ1YmJsaW5nIHVwIHRvIHRoZSBtYXAuICovXG4gICAgICAgICAgICBzdG9wRXZlbnRQcm9wYWdhdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgYW5jaG9yID0gdGhpcy5hbmNob3I7XG4gICAgICAgICAgICAgICAgYW5jaG9yLnN0eWxlLmN1cnNvciA9ICdhdXRvJztcblxuICAgICAgICAgICAgICAgIFsnY2xpY2snLCAnZGJsY2xpY2snLCAnY29udGV4dG1lbnUnLCAnd2hlZWwnLCAnbW91c2Vkb3duJywgJ3RvdWNoc3RhcnQnLFxuICAgICAgICAgICAgICAgICAgICAncG9pbnRlcmRvd24nXVxuICAgICAgICAgICAgICAgICAgICAuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuY2hvci5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkZWZpbmVJbmZvQm94Q2xhc3MoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbmFtZSBJbmZvQm94XG4gICAgICAgICAqIEB2ZXJzaW9uIDEuMS4xOSBbQXByaWwgNiwgMjAxOF1cbiAgICAgICAgICogQGF1dGhvciBHYXJ5IExpdHRsZSAoaW5zcGlyZWQgYnkgcHJvb2Ytb2YtY29uY2VwdCBjb2RlIGZyb20gUGFtZWxhIEZveCBvZiBHb29nbGUpXG4gICAgICAgICAqIEBjb3B5cmlnaHQgQ29weXJpZ2h0IDIwMTAgR2FyeSBMaXR0bGUgW2dhcnkgYXQgbHV4Y2VudHJhbC5jb21dXG4gICAgICAgICAqIEBmaWxlb3ZlcnZpZXcgSW5mb0JveCBleHRlbmRzIHRoZSBHb29nbGUgTWFwcyBKYXZhU2NyaXB0IEFQSSBWMyA8dHQ+T3ZlcmxheVZpZXc8L3R0PiBjbGFzcy5cbiAgICAgICAgICogIDxwPlxuICAgICAgICAgKiAgQW4gSW5mb0JveCBiZWhhdmVzIGxpa2UgYSA8dHQ+Z29vZ2xlLm1hcHMuSW5mb1dpbmRvdzwvdHQ+LCBidXQgaXQgc3VwcG9ydHMgc2V2ZXJhbFxuICAgICAgICAgKiAgYWRkaXRpb25hbCBwcm9wZXJ0aWVzIGZvciBhZHZhbmNlZCBzdHlsaW5nLiBBbiBJbmZvQm94IGNhbiBhbHNvIGJlIHVzZWQgYXMgYSBtYXAgbGFiZWwuXG4gICAgICAgICAqICA8cD5cbiAgICAgICAgICogIEFuIEluZm9Cb3ggYWxzbyBmaXJlcyB0aGUgc2FtZSBldmVudHMgYXMgYSA8dHQ+Z29vZ2xlLm1hcHMuSW5mb1dpbmRvdzwvdHQ+LlxuICAgICAgICAgKi9cblxuICAgICAgICAvKiFcbiAgICAgICAgICpcbiAgICAgICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAgICAgICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICAgICAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAgICAgICAgICpcbiAgICAgICAgICogICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gICAgICAgICAqXG4gICAgICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAgICAgICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICAgICAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAgICAgICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICAgICAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAgICAgICAgICovXG5cbiAgICAgICAgLypqc2xpbnQgYnJvd3Nlcjp0cnVlICovXG4gICAgICAgIC8qZ2xvYmFsIGdvb2dsZSAqL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbmFtZSBJbmZvQm94T3B0aW9uc1xuICAgICAgICAgKiBAY2xhc3MgVGhpcyBjbGFzcyByZXByZXNlbnRzIHRoZSBvcHRpb25hbCBwYXJhbWV0ZXIgcGFzc2VkIHRvIHRoZSB7QGxpbmsgSW5mb0JveH0gY29uc3RydWN0b3IuXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfE5vZGV9IGNvbnRlbnQgVGhlIGNvbnRlbnQgb2YgdGhlIEluZm9Cb3ggKHBsYWluIHRleHQgb3IgYW4gSFRNTCBET00gbm9kZSkuXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2Rpc2FibGVBdXRvUGFuPWZhbHNlXSBEaXNhYmxlIGF1dG8tcGFuIG9uIDx0dD5vcGVuPC90dD4uXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBtYXhXaWR0aCBUaGUgbWF4aW11bSB3aWR0aCAoaW4gcGl4ZWxzKSBvZiB0aGUgSW5mb0JveC4gU2V0IHRvIDAgaWYgbm8gbWF4aW11bS5cbiAgICAgICAgICogQHByb3BlcnR5IHtTaXplfSBwaXhlbE9mZnNldCBUaGUgb2Zmc2V0IChpbiBwaXhlbHMpIGZyb20gdGhlIHRvcCBsZWZ0IGNvcm5lciBvZiB0aGUgSW5mb0JveFxuICAgICAgICAgKiAgKG9yIHRoZSBib3R0b20gbGVmdCBjb3JuZXIgaWYgdGhlIDxjb2RlPmFsaWduQm90dG9tPC9jb2RlPiBwcm9wZXJ0eSBpcyA8Y29kZT50cnVlPC9jb2RlPilcbiAgICAgICAgICogIHRvIHRoZSBtYXAgcGl4ZWwgY29ycmVzcG9uZGluZyB0byA8dHQ+cG9zaXRpb248L3R0Pi5cbiAgICAgICAgICogQHByb3BlcnR5IHtMYXRMbmd9IHBvc2l0aW9uIFRoZSBnZW9ncmFwaGljIGxvY2F0aW9uIGF0IHdoaWNoIHRvIGRpc3BsYXkgdGhlIEluZm9Cb3guXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB6SW5kZXggVGhlIENTUyB6LWluZGV4IHN0eWxlIHZhbHVlIGZvciB0aGUgSW5mb0JveC5cbiAgICAgICAgICogIE5vdGU6IFRoaXMgdmFsdWUgb3ZlcnJpZGVzIGEgekluZGV4IHNldHRpbmcgc3BlY2lmaWVkIGluIHRoZSA8dHQ+Ym94U3R5bGU8L3R0PiBwcm9wZXJ0eS5cbiAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd9IFtib3hDbGFzcz1cImluZm9Cb3hcIl0gVGhlIG5hbWUgb2YgdGhlIENTUyBjbGFzcyBkZWZpbmluZyB0aGUgc3R5bGVzIGZvciB0aGUgSW5mb0JveCBjb250YWluZXIuXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBbYm94U3R5bGVdIEFuIG9iamVjdCBsaXRlcmFsIHdob3NlIHByb3BlcnRpZXMgZGVmaW5lIHNwZWNpZmljIENTU1xuICAgICAgICAgKiAgc3R5bGUgdmFsdWVzIHRvIGJlIGFwcGxpZWQgdG8gdGhlIEluZm9Cb3guIFN0eWxlIHZhbHVlcyBkZWZpbmVkIGhlcmUgb3ZlcnJpZGUgdGhvc2UgdGhhdCBtYXlcbiAgICAgICAgICogIGJlIGRlZmluZWQgaW4gdGhlIDxjb2RlPmJveENsYXNzPC9jb2RlPiBzdHlsZSBzaGVldC4gSWYgdGhpcyBwcm9wZXJ0eSBpcyBjaGFuZ2VkIGFmdGVyIHRoZVxuICAgICAgICAgKiAgSW5mb0JveCBoYXMgYmVlbiBjcmVhdGVkLCBhbGwgcHJldmlvdXNseSBzZXQgc3R5bGVzIChleGNlcHQgdGhvc2UgZGVmaW5lZCBpbiB0aGUgc3R5bGUgc2hlZXQpXG4gICAgICAgICAqICBhcmUgcmVtb3ZlZCBmcm9tIHRoZSBJbmZvQm94IGJlZm9yZSB0aGUgbmV3IHN0eWxlIHZhbHVlcyBhcmUgYXBwbGllZC5cbiAgICAgICAgICogQHByb3BlcnR5IHtzdHJpbmd9IGNsb3NlQm94TWFyZ2luIFRoZSBDU1MgbWFyZ2luIHN0eWxlIHZhbHVlIGZvciB0aGUgY2xvc2UgYm94LlxuICAgICAgICAgKiAgVGhlIGRlZmF1bHQgaXMgXCIycHhcIiAoYSAyLXBpeGVsIG1hcmdpbiBvbiBhbGwgc2lkZXMpLlxuICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gY2xvc2VCb3hUaXRsZSBUaGUgdG9vbCB0aXAgZm9yIHRoZSBjbG9zZSBib3guIFRoZSBkZWZhdWx0IGlzIFwiIENsb3NlIFwiLlxuICAgICAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gY2xvc2VCb3hVUkwgVGhlIFVSTCBvZiB0aGUgaW1hZ2UgcmVwcmVzZW50aW5nIHRoZSBjbG9zZSBib3guXG4gICAgICAgICAqICBOb3RlOiBUaGUgZGVmYXVsdCBpcyB0aGUgVVJMIGZvciBHb29nbGUncyBzdGFuZGFyZCBjbG9zZSBib3guXG4gICAgICAgICAqICBTZXQgdGhpcyBwcm9wZXJ0eSB0byBcIlwiIGlmIG5vIGNsb3NlIGJveCBpcyByZXF1aXJlZC5cbiAgICAgICAgICogQHByb3BlcnR5IHtTaXplfSBpbmZvQm94Q2xlYXJhbmNlIE1pbmltdW0gb2Zmc2V0IChpbiBwaXhlbHMpIGZyb20gdGhlIEluZm9Cb3ggdG8gdGhlXG4gICAgICAgICAqICBtYXAgZWRnZSBhZnRlciBhbiBhdXRvLXBhbi5cbiAgICAgICAgICogQHByb3BlcnR5IHtib29sZWFufSBbaXNIaWRkZW49ZmFsc2VdIEhpZGUgdGhlIEluZm9Cb3ggb24gPHR0Pm9wZW48L3R0Pi5cbiAgICAgICAgICogIFtEZXByZWNhdGVkIGluIGZhdm9yIG9mIHRoZSA8dHQ+dmlzaWJsZTwvdHQ+IHByb3BlcnR5Ll1cbiAgICAgICAgICogQHByb3BlcnR5IHtib29sZWFufSBbdmlzaWJsZT10cnVlXSBTaG93IHRoZSBJbmZvQm94IG9uIDx0dD5vcGVuPC90dD4uXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gYWxpZ25Cb3R0b20gQWxpZ24gdGhlIGJvdHRvbSBsZWZ0IGNvcm5lciBvZiB0aGUgSW5mb0JveCB0byB0aGUgPGNvZGU+cG9zaXRpb248L2NvZGU+XG4gICAgICAgICAqICBsb2NhdGlvbiAoZGVmYXVsdCBpcyA8dHQ+ZmFsc2U8L3R0PiB3aGljaCBtZWFucyB0aGF0IHRoZSB0b3AgbGVmdCBjb3JuZXIgb2YgdGhlIEluZm9Cb3ggaXMgYWxpZ25lZCkuXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBwYW5lIFRoZSBwYW5lIHdoZXJlIHRoZSBJbmZvQm94IGlzIHRvIGFwcGVhciAoZGVmYXVsdCBpcyBcImZsb2F0UGFuZVwiKS5cbiAgICAgICAgICogIFNldCB0aGUgcGFuZSB0byBcIm1hcFBhbmVcIiBpZiB0aGUgSW5mb0JveCBpcyBiZWluZyB1c2VkIGFzIGEgbWFwIGxhYmVsLlxuICAgICAgICAgKiAgVmFsaWQgcGFuZSBuYW1lcyBhcmUgdGhlIHByb3BlcnR5IG5hbWVzIGZvciB0aGUgPHR0Pmdvb2dsZS5tYXBzLk1hcFBhbmVzPC90dD4gb2JqZWN0LlxuICAgICAgICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IGVuYWJsZUV2ZW50UHJvcGFnYXRpb24gUHJvcGFnYXRlIG1vdXNlZG93biwgbW91c2Vtb3ZlLCBtb3VzZW92ZXIsIG1vdXNlb3V0LFxuICAgICAgICAgKiAgbW91c2V1cCwgY2xpY2ssIGRibGNsaWNrLCB0b3VjaHN0YXJ0LCB0b3VjaGVuZCwgdG91Y2htb3ZlLCBhbmQgY29udGV4dG1lbnUgZXZlbnRzIGluIHRoZSBJbmZvQm94XG4gICAgICAgICAqICAoZGVmYXVsdCBpcyA8dHQ+ZmFsc2U8L3R0PiB0byBtaW1pYyB0aGUgYmVoYXZpb3Igb2YgYSA8dHQ+Z29vZ2xlLm1hcHMuSW5mb1dpbmRvdzwvdHQ+KS4gU2V0XG4gICAgICAgICAqICB0aGlzIHByb3BlcnR5IHRvIDx0dD50cnVlPC90dD4gaWYgdGhlIEluZm9Cb3ggaXMgYmVpbmcgdXNlZCBhcyBhIG1hcCBsYWJlbC5cbiAgICAgICAgICovXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYW4gSW5mb0JveCB3aXRoIHRoZSBvcHRpb25zIHNwZWNpZmllZCBpbiB7QGxpbmsgSW5mb0JveE9wdGlvbnN9LlxuICAgICAgICAgKiAgQ2FsbCA8dHQ+SW5mb0JveC5vcGVuPC90dD4gdG8gYWRkIHRoZSBib3ggdG8gdGhlIG1hcC5cbiAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAqIEBwYXJhbSB7SW5mb0JveE9wdGlvbnN9IFtvcHRfb3B0c11cbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0IEluZm9Cb3ggPSBmdW5jdGlvbiBJbmZvQm94KG9wdF9vcHRzKSB7XG5cbiAgICAgICAgICAgIG9wdF9vcHRzID0gb3B0X29wdHMgfHwge307XG5cbiAgICAgICAgICAgIGdvb2dsZS5tYXBzLk92ZXJsYXlWaWV3LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cbiAgICAgICAgICAgIC8vIFN0YW5kYXJkIG9wdGlvbnMgKGluIGNvbW1vbiB3aXRoIGdvb2dsZS5tYXBzLkluZm9XaW5kb3cpOlxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIHRoaXMuY29udGVudF8gPSBvcHRfb3B0cy5jb250ZW50IHx8IFwiXCI7XG4gICAgICAgICAgICB0aGlzLmRpc2FibGVBdXRvUGFuXyA9IG9wdF9vcHRzLmRpc2FibGVBdXRvUGFuIHx8IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5tYXhXaWR0aF8gPSBvcHRfb3B0cy5tYXhXaWR0aCB8fCAwO1xuICAgICAgICAgICAgdGhpcy5waXhlbE9mZnNldF8gPSBvcHRfb3B0cy5waXhlbE9mZnNldCB8fCBuZXcgZ29vZ2xlLm1hcHMuU2l6ZSgwLCAwKTtcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb25fID0gb3B0X29wdHMucG9zaXRpb24gfHwgbmV3IGdvb2dsZS5tYXBzLkxhdExuZygwLCAwKTtcbiAgICAgICAgICAgIHRoaXMuekluZGV4XyA9IG9wdF9vcHRzLnpJbmRleCB8fCBudWxsO1xuXG4gICAgICAgICAgICAvLyBBZGRpdGlvbmFsIG9wdGlvbnMgKHVuaXF1ZSB0byBJbmZvQm94KTpcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICB0aGlzLmJveENsYXNzXyA9IG9wdF9vcHRzLmJveENsYXNzIHx8IFwiaW5mb0JveFwiO1xuICAgICAgICAgICAgdGhpcy5ib3hTdHlsZV8gPSBvcHRfb3B0cy5ib3hTdHlsZSB8fCB7fTtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VCb3hNYXJnaW5fID0gb3B0X29wdHMuY2xvc2VCb3hNYXJnaW4gfHwgXCIycHhcIjtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VCb3hVUkxfID0gb3B0X29wdHMuY2xvc2VCb3hVUkwgfHwgXCIvL3d3dy5nb29nbGUuY29tL2ludGwvZW5fdXMvbWFwZmlsZXMvY2xvc2UuZ2lmXCI7XG4gICAgICAgICAgICBpZiAob3B0X29wdHMuY2xvc2VCb3hVUkwgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlQm94VVJMXyA9IFwiXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNsb3NlQm94VGl0bGVfID0gb3B0X29wdHMuY2xvc2VCb3hUaXRsZSB8fCBcIiBDbG9zZSBcIjtcbiAgICAgICAgICAgIHRoaXMuaW5mb0JveENsZWFyYW5jZV8gPSBvcHRfb3B0cy5pbmZvQm94Q2xlYXJhbmNlIHx8IG5ldyBnb29nbGUubWFwcy5TaXplKDEsIDEpO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdF9vcHRzLnZpc2libGUgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9wdF9vcHRzLmlzSGlkZGVuID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdF9vcHRzLnZpc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdF9vcHRzLnZpc2libGUgPSAhb3B0X29wdHMuaXNIaWRkZW47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pc0hpZGRlbl8gPSAhb3B0X29wdHMudmlzaWJsZTtcblxuICAgICAgICAgICAgdGhpcy5hbGlnbkJvdHRvbV8gPSBvcHRfb3B0cy5hbGlnbkJvdHRvbSB8fCBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMucGFuZV8gPSBvcHRfb3B0cy5wYW5lIHx8IFwiZmxvYXRQYW5lXCI7XG4gICAgICAgICAgICB0aGlzLmVuYWJsZUV2ZW50UHJvcGFnYXRpb25fID0gb3B0X29wdHMuZW5hYmxlRXZlbnRQcm9wYWdhdGlvbiB8fCBmYWxzZTtcblxuICAgICAgICAgICAgdGhpcy5kaXZfID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VMaXN0ZW5lcl8gPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5tb3ZlTGlzdGVuZXJfID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dExpc3RlbmVyXyA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmV2ZW50TGlzdGVuZXJzXyA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmZpeGVkV2lkdGhTZXRfID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIEluZm9Cb3ggZXh0ZW5kcyBPdmVybGF5VmlldyBpbiB0aGUgR29vZ2xlIE1hcHMgQVBJIHYzLlxuICAgICAgICAgKi9cbiAgICAgICAgSW5mb0JveC5wcm90b3R5cGUgPSBuZXcgZ29vZ2xlLm1hcHMuT3ZlcmxheVZpZXcoKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyB0aGUgRElWIHJlcHJlc2VudGluZyB0aGUgSW5mb0JveC5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIEluZm9Cb3gucHJvdG90eXBlLmNyZWF0ZUluZm9Cb3hEaXZfID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICB2YXIgaTtcbiAgICAgICAgICAgIHZhciBldmVudHM7XG4gICAgICAgICAgICB2YXIgYnc7XG4gICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xuXG4gICAgICAgICAgICAvLyBUaGlzIGhhbmRsZXIgcHJldmVudHMgYW4gZXZlbnQgaW4gdGhlIEluZm9Cb3ggZnJvbSBiZWluZyBwYXNzZWQgb24gdG8gdGhlIG1hcC5cbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICB2YXIgY2FuY2VsSGFuZGxlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgZS5jYW5jZWxCdWJibGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmIChlLnN0b3BQcm9wYWdhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8vIFRoaXMgaGFuZGxlciBpZ25vcmVzIHRoZSBjdXJyZW50IGV2ZW50IGluIHRoZSBJbmZvQm94IGFuZCBjb25kaXRpb25hbGx5IHByZXZlbnRzXG4gICAgICAgICAgICAvLyB0aGUgZXZlbnQgZnJvbSBiZWluZyBwYXNzZWQgb24gdG8gdGhlIG1hcC4gSXQgaXMgdXNlZCBmb3IgdGhlIGNvbnRleHRtZW51IGV2ZW50LlxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIHZhciBpZ25vcmVIYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcblxuICAgICAgICAgICAgICAgIGUucmV0dXJuVmFsdWUgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgIGlmIChlLnByZXZlbnREZWZhdWx0KSB7XG5cbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICghbWUuZW5hYmxlRXZlbnRQcm9wYWdhdGlvbl8pIHtcblxuICAgICAgICAgICAgICAgICAgICBjYW5jZWxIYW5kbGVyKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGlmICghdGhpcy5kaXZfKSB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmRpdl8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRCb3hTdHlsZV8oKTtcblxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5jb250ZW50Xy5ub2RlVHlwZSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpdl8uaW5uZXJIVE1MID0gdGhpcy5nZXRDbG9zZUJveEltZ18oKSArIHRoaXMuY29udGVudF87XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXZfLmlubmVySFRNTCA9IHRoaXMuZ2V0Q2xvc2VCb3hJbWdfKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGl2Xy5hcHBlbmRDaGlsZCh0aGlzLmNvbnRlbnRfKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIEluZm9Cb3ggRElWIHRvIHRoZSBET01cbiAgICAgICAgICAgICAgICB0aGlzLmdldFBhbmVzKClbdGhpcy5wYW5lX10uYXBwZW5kQ2hpbGQodGhpcy5kaXZfKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuYWRkQ2xpY2tIYW5kbGVyXygpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGl2Xy5zdHlsZS53aWR0aCkge1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZml4ZWRXaWR0aFNldF8gPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tYXhXaWR0aF8gIT09IDAgJiYgdGhpcy5kaXZfLm9mZnNldFdpZHRoID4gdGhpcy5tYXhXaWR0aF8pIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXZfLnN0eWxlLndpZHRoID0gdGhpcy5tYXhXaWR0aF87XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpdl8uc3R5bGUub3ZlcmZsb3cgPSBcImF1dG9cIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZml4ZWRXaWR0aFNldF8gPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8vIFRoZSBmb2xsb3dpbmcgY29kZSBpcyBuZWVkZWQgdG8gb3ZlcmNvbWUgcHJvYmxlbXMgd2l0aCBNU0lFXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGJ3ID0gdGhpcy5nZXRCb3hXaWR0aHNfKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGl2Xy5zdHlsZS53aWR0aCA9ICh0aGlzLmRpdl8ub2Zmc2V0V2lkdGggLSBidy5sZWZ0IC0gYncucmlnaHQpICsgXCJweFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maXhlZFdpZHRoU2V0XyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5wYW5Cb3hfKHRoaXMuZGlzYWJsZUF1dG9QYW5fKTtcblxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5lbmFibGVFdmVudFByb3BhZ2F0aW9uXykge1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnNfID0gW107XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQ2FuY2VsIGV2ZW50IHByb3BhZ2F0aW9uLlxuICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAvLyBOb3RlOiBtb3VzZW1vdmUgbm90IGluY2x1ZGVkICh0byByZXNvbHZlIElzc3VlIDE1MilcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRzID0gW1wibW91c2Vkb3duXCIsIFwibW91c2VvdmVyXCIsIFwibW91c2VvdXRcIiwgXCJtb3VzZXVwXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImNsaWNrXCIsIFwiZGJsY2xpY2tcIiwgXCJ0b3VjaHN0YXJ0XCIsIFwidG91Y2hlbmRcIiwgXCJ0b3VjaG1vdmVcIl07XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGV2ZW50cy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50TGlzdGVuZXJzXy5wdXNoKGdvb2dsZS5tYXBzLmV2ZW50LmFkZERvbUxpc3RlbmVyKHRoaXMuZGl2XywgZXZlbnRzW2ldLCBjYW5jZWxIYW5kbGVyKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBXb3JrYXJvdW5kIGZvciBHb29nbGUgYnVnIHRoYXQgY2F1c2VzIHRoZSBjdXJzb3IgdG8gY2hhbmdlIHRvIGEgcG9pbnRlclxuICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSBtb3VzZSBtb3ZlcyBvdmVyIGEgbWFya2VyIHVuZGVybmVhdGggSW5mb0JveC5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudExpc3RlbmVyc18ucHVzaChnb29nbGUubWFwcy5ldmVudC5hZGREb21MaXN0ZW5lcih0aGlzLmRpdl8sIFwibW91c2VvdmVyXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0eWxlLmN1cnNvciA9IFwiZGVmYXVsdFwiO1xuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0TGlzdGVuZXJfID0gZ29vZ2xlLm1hcHMuZXZlbnQuYWRkRG9tTGlzdGVuZXIodGhpcy5kaXZfLCBcImNvbnRleHRtZW51XCIsIGlnbm9yZUhhbmRsZXIpO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVGhpcyBldmVudCBpcyBmaXJlZCB3aGVuIHRoZSBESVYgY29udGFpbmluZyB0aGUgSW5mb0JveCdzIGNvbnRlbnQgaXMgYXR0YWNoZWQgdG8gdGhlIERPTS5cbiAgICAgICAgICAgICAgICAgKiBAbmFtZSBJbmZvQm94I2RvbXJlYWR5XG4gICAgICAgICAgICAgICAgICogQGV2ZW50XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcih0aGlzLCBcImRvbXJlYWR5XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIHRoZSBIVE1MIDxJTUc+IHRhZyBmb3IgdGhlIGNsb3NlIGJveC5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIEluZm9Cb3gucHJvdG90eXBlLmdldENsb3NlQm94SW1nXyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgdmFyIGltZyA9IFwiXCI7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmNsb3NlQm94VVJMXyAhPT0gXCJcIikge1xuXG4gICAgICAgICAgICAgICAgaW1nID0gXCI8aW1nXCI7XG4gICAgICAgICAgICAgICAgaW1nICs9IFwiIHNyYz0nXCIgKyB0aGlzLmNsb3NlQm94VVJMXyArIFwiJ1wiO1xuICAgICAgICAgICAgICAgIGltZyArPSBcIiBhbGlnbj1yaWdodFwiOyAvLyBEbyB0aGlzIGJlY2F1c2UgT3BlcmEgY2hva2VzIG9uIHN0eWxlPSdmbG9hdDogcmlnaHQ7J1xuICAgICAgICAgICAgICAgIGltZyArPSBcIiB0aXRsZT0nXCIgKyB0aGlzLmNsb3NlQm94VGl0bGVfICsgXCInXCI7XG4gICAgICAgICAgICAgICAgaW1nICs9IFwiIHN0eWxlPSdcIjtcbiAgICAgICAgICAgICAgICBpbWcgKz0gXCIgcG9zaXRpb246IHJlbGF0aXZlO1wiOyAvLyBSZXF1aXJlZCBieSBNU0lFXG4gICAgICAgICAgICAgICAgaW1nICs9IFwiIGN1cnNvcjogcG9pbnRlcjtcIjtcbiAgICAgICAgICAgICAgICBpbWcgKz0gXCIgbWFyZ2luOiBcIiArIHRoaXMuY2xvc2VCb3hNYXJnaW5fICsgXCI7XCI7XG4gICAgICAgICAgICAgICAgaW1nICs9IFwiJz5cIjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGltZztcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQWRkcyB0aGUgY2xpY2sgaGFuZGxlciB0byB0aGUgSW5mb0JveCBjbG9zZSBib3guXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBJbmZvQm94LnByb3RvdHlwZS5hZGRDbGlja0hhbmRsZXJfID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICB2YXIgY2xvc2VCb3g7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmNsb3NlQm94VVJMXyAhPT0gXCJcIikge1xuXG4gICAgICAgICAgICAgICAgY2xvc2VCb3ggPSB0aGlzLmRpdl8uZmlyc3RDaGlsZDtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlTGlzdGVuZXJfID0gZ29vZ2xlLm1hcHMuZXZlbnQuYWRkRG9tTGlzdGVuZXIoY2xvc2VCb3gsIFwiY2xpY2tcIiwgdGhpcy5nZXRDbG9zZUNsaWNrSGFuZGxlcl8oKSk7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlTGlzdGVuZXJfID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyB0aGUgZnVuY3Rpb24gdG8gY2FsbCB3aGVuIHRoZSB1c2VyIGNsaWNrcyB0aGUgY2xvc2UgYm94IG9mIGFuIEluZm9Cb3guXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBJbmZvQm94LnByb3RvdHlwZS5nZXRDbG9zZUNsaWNrSGFuZGxlcl8gPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIHZhciBtZSA9IHRoaXM7XG5cbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSkge1xuXG4gICAgICAgICAgICAgICAgLy8gMS4wLjMgZml4OiBBbHdheXMgcHJldmVudCBwcm9wYWdhdGlvbiBvZiBhIGNsb3NlIGJveCBjbGljayB0byB0aGUgbWFwOlxuICAgICAgICAgICAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIGlmIChlLnN0b3BQcm9wYWdhdGlvbikge1xuXG4gICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVGhpcyBldmVudCBpcyBmaXJlZCB3aGVuIHRoZSBJbmZvQm94J3MgY2xvc2UgYm94IGlzIGNsaWNrZWQuXG4gICAgICAgICAgICAgICAgICogQG5hbWUgSW5mb0JveCNjbG9zZWNsaWNrXG4gICAgICAgICAgICAgICAgICogQGV2ZW50XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcihtZSwgXCJjbG9zZWNsaWNrXCIpO1xuXG4gICAgICAgICAgICAgICAgbWUuY2xvc2UoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFBhbnMgdGhlIG1hcCBzbyB0aGF0IHRoZSBJbmZvQm94IGFwcGVhcnMgZW50aXJlbHkgd2l0aGluIHRoZSBtYXAncyB2aXNpYmxlIGFyZWEuXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBJbmZvQm94LnByb3RvdHlwZS5wYW5Cb3hfID0gZnVuY3Rpb24gKGRpc2FibGVQYW4pIHtcblxuICAgICAgICAgICAgdmFyIG1hcDtcbiAgICAgICAgICAgIHZhciBib3VuZHM7XG4gICAgICAgICAgICB2YXIgeE9mZnNldCA9IDAsIHlPZmZzZXQgPSAwO1xuXG4gICAgICAgICAgICBpZiAoIWRpc2FibGVQYW4pIHtcblxuICAgICAgICAgICAgICAgIG1hcCA9IHRoaXMuZ2V0TWFwKCk7XG5cbiAgICAgICAgICAgICAgICBpZiAobWFwIGluc3RhbmNlb2YgZ29vZ2xlLm1hcHMuTWFwKSB7IC8vIE9ubHkgcGFuIGlmIGF0dGFjaGVkIHRvIG1hcCwgbm90IHBhbm9yYW1hXG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXAuZ2V0Qm91bmRzKCkuY29udGFpbnModGhpcy5wb3NpdGlvbl8pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBNYXJrZXIgbm90IGluIHZpc2libGUgYXJlYSBvZiBtYXAsIHNvIHNldCBjZW50ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIG1hcCB0byB0aGUgbWFya2VyIHBvc2l0aW9uIGZpcnN0LlxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwLnNldENlbnRlcih0aGlzLnBvc2l0aW9uXyk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgaXdPZmZzZXRYID0gdGhpcy5waXhlbE9mZnNldF8ud2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpd09mZnNldFkgPSB0aGlzLnBpeGVsT2Zmc2V0Xy5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpd1dpZHRoID0gdGhpcy5kaXZfLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXdIZWlnaHQgPSB0aGlzLmRpdl8ub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGFkWCA9IHRoaXMuaW5mb0JveENsZWFyYW5jZV8ud2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwYWRZID0gdGhpcy5pbmZvQm94Q2xlYXJhbmNlXy5oZWlnaHQ7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hcC5wYW5Ub0JvdW5kcy5sZW5ndGggPT0gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXNpbmcgcHJvamVjdGlvbi5mcm9tTGF0TG5nVG9Db250YWluZXJQaXhlbCB0byBjb21wdXRlIHRoZSBpbmZvd2luZG93IHBvc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkb2VzIG5vdCB3b3JrIGNvcnJlY3RseSBhbnltb3JlIGZvciBKUyBNYXBzIEFQSSB2My4zMiBhbmQgYWJvdmUgaWYgdGhlcmUgaXMgYVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJldmlvdXMgc3luY2hyb25vdXMgY2FsbCB0aGF0IGNhdXNlcyB0aGUgbWFwIHRvIGFuaW1hdGUgKGUuZy4gc2V0Q2VudGVyIHdoZW5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBwb3NpdGlvbiBpcyBub3Qgd2l0aGluIGJvdW5kcykuIEhlbmNlLCB3ZSBhcmUgdXNpbmcgcGFuVG9Cb3VuZHMgd2l0aFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGFkZGluZyBpbnN0ZWFkLCB3aGljaCB3b3JrcyBzeW5jaHJvbm91c2x5LlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhZGRpbmcgPSB7IGxlZnQ6IDAsIHJpZ2h0OiAwLCB0b3A6IDAsIGJvdHRvbTogMCB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZy5sZWZ0ID0gLWl3T2Zmc2V0WCArIHBhZFg7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nLnJpZ2h0ID0gaXdPZmZzZXRYICsgaXdXaWR0aCArIHBhZFg7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hbGlnbkJvdHRvbV8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nLnRvcCA9IC1pd09mZnNldFkgKyBwYWRZICsgaXdIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZy5ib3R0b20gPSBpd09mZnNldFkgKyBwYWRZO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nLnRvcCA9IC1pd09mZnNldFkgKyBwYWRZO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmcuYm90dG9tID0gaXdPZmZzZXRZICsgaXdIZWlnaHQgKyBwYWRZO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwLnBhblRvQm91bmRzKG5ldyBnb29nbGUubWFwcy5MYXRMbmdCb3VuZHModGhpcy5wb3NpdGlvbl8pLCBwYWRkaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXBEaXYgPSBtYXAuZ2V0RGl2KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWFwV2lkdGggPSBtYXBEaXYub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWFwSGVpZ2h0ID0gbWFwRGl2Lm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaXhQb3NpdGlvbiA9IHRoaXMuZ2V0UHJvamVjdGlvbigpLmZyb21MYXRMbmdUb0NvbnRhaW5lclBpeGVsKHRoaXMucG9zaXRpb25fKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBpeFBvc2l0aW9uLnggPCAoLWl3T2Zmc2V0WCArIHBhZFgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeE9mZnNldCA9IHBpeFBvc2l0aW9uLnggKyBpd09mZnNldFggLSBwYWRYO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgocGl4UG9zaXRpb24ueCArIGl3V2lkdGggKyBpd09mZnNldFggKyBwYWRYKSA+IG1hcFdpZHRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeE9mZnNldCA9IHBpeFBvc2l0aW9uLnggKyBpd1dpZHRoICsgaXdPZmZzZXRYICsgcGFkWCAtIG1hcFdpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYWxpZ25Cb3R0b21fKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBpeFBvc2l0aW9uLnkgPCAoLWl3T2Zmc2V0WSArIHBhZFkgKyBpd0hlaWdodCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeU9mZnNldCA9IHBpeFBvc2l0aW9uLnkgKyBpd09mZnNldFkgLSBwYWRZIC0gaXdIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgocGl4UG9zaXRpb24ueSArIGl3T2Zmc2V0WSArIHBhZFkpID4gbWFwSGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlPZmZzZXQgPSBwaXhQb3NpdGlvbi55ICsgaXdPZmZzZXRZICsgcGFkWSAtIG1hcEhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwaXhQb3NpdGlvbi55IDwgKC1pd09mZnNldFkgKyBwYWRZKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5T2Zmc2V0ID0gcGl4UG9zaXRpb24ueSArIGl3T2Zmc2V0WSAtIHBhZFk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgocGl4UG9zaXRpb24ueSArIGl3SGVpZ2h0ICsgaXdPZmZzZXRZICsgcGFkWSkgPiBtYXBIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeU9mZnNldCA9IHBpeFBvc2l0aW9uLnkgKyBpd0hlaWdodCArIGl3T2Zmc2V0WSArIHBhZFkgLSBtYXBIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh4T2Zmc2V0ID09PSAwICYmIHlPZmZzZXQgPT09IDApKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNb3ZlIHRoZSBtYXAgdG8gdGhlIHNoaWZ0ZWQgY2VudGVyLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBtYXAuZ2V0Q2VudGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwLnBhbkJ5KHhPZmZzZXQsIHlPZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXRzIHRoZSBzdHlsZSBvZiB0aGUgSW5mb0JveCBieSBzZXR0aW5nIHRoZSBzdHlsZSBzaGVldCBhbmQgYXBwbHlpbmdcbiAgICAgICAgICogb3RoZXIgc3BlY2lmaWMgc3R5bGVzIHJlcXVlc3RlZC5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIEluZm9Cb3gucHJvdG90eXBlLnNldEJveFN0eWxlXyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgdmFyIGksIGJveFN0eWxlO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5kaXZfKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBBcHBseSBzdHlsZSB2YWx1ZXMgZnJvbSB0aGUgc3R5bGUgc2hlZXQgZGVmaW5lZCBpbiB0aGUgYm94Q2xhc3MgcGFyYW1ldGVyOlxuICAgICAgICAgICAgICAgIHRoaXMuZGl2Xy5jbGFzc05hbWUgPSB0aGlzLmJveENsYXNzXztcblxuICAgICAgICAgICAgICAgIC8vIENsZWFyIGV4aXN0aW5nIGlubGluZSBzdHlsZSB2YWx1ZXM6XG4gICAgICAgICAgICAgICAgdGhpcy5kaXZfLnN0eWxlLmNzc1RleHQgPSBcIlwiO1xuXG4gICAgICAgICAgICAgICAgLy8gQXBwbHkgc3R5bGUgdmFsdWVzIGRlZmluZWQgaW4gdGhlIGJveFN0eWxlIHBhcmFtZXRlcjpcbiAgICAgICAgICAgICAgICBib3hTdHlsZSA9IHRoaXMuYm94U3R5bGVfO1xuICAgICAgICAgICAgICAgIGZvciAoaSBpbiBib3hTdHlsZSkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChib3hTdHlsZS5oYXNPd25Qcm9wZXJ0eShpKSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpdl8uc3R5bGVbaV0gPSBib3hTdHlsZVtpXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIEZpeCBmb3IgaU9TIGRpc2FwcGVhcmluZyBJbmZvQm94IHByb2JsZW0uXG4gICAgICAgICAgICAgICAgLy8gU2VlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvOTIyOTUzNS9nb29nbGUtbWFwcy1tYXJrZXJzLWRpc2FwcGVhci1hdC1jZXJ0YWluLXpvb20tbGV2ZWwtb25seS1vbi1pcGhvbmUtaXBhZFxuICAgICAgICAgICAgICAgIC8vIFJlcXVpcmVkOiB1c2UgXCJtYXRyaXhcIiB0ZWNobmlxdWUgdG8gc3BlY2lmeSB0cmFuc2Zvcm1zIGluIG9yZGVyIHRvIGF2b2lkIHRoaXMgYnVnLlxuICAgICAgICAgICAgICAgIGlmICgodHlwZW9mIHRoaXMuZGl2Xy5zdHlsZS5XZWJraXRUcmFuc2Zvcm0gPT09IFwidW5kZWZpbmVkXCIpIHx8ICh0aGlzLmRpdl8uc3R5bGUuV2Via2l0VHJhbnNmb3JtLmluZGV4T2YoXCJ0cmFuc2xhdGVaXCIpID09PSAtMSAmJiB0aGlzLmRpdl8uc3R5bGUuV2Via2l0VHJhbnNmb3JtLmluZGV4T2YoXCJtYXRyaXhcIikgPT09IC0xKSkge1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGl2Xy5zdHlsZS5XZWJraXRUcmFuc2Zvcm0gPSBcInRyYW5zbGF0ZVooMClcIjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBGaXggdXAgb3BhY2l0eSBzdHlsZSBmb3IgYmVuZWZpdCBvZiBNU0lFOlxuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmRpdl8uc3R5bGUub3BhY2l0eSAhPT0gXCJ1bmRlZmluZWRcIiAmJiB0aGlzLmRpdl8uc3R5bGUub3BhY2l0eSAhPT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBTZWUgaHR0cDovL3d3dy5xdWlya3Ntb2RlLm9yZy9jc3Mvb3BhY2l0eS5odG1sXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGl2Xy5zdHlsZS5Nc0ZpbHRlciA9IFwiXFxcInByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5BbHBoYShPcGFjaXR5PVwiICsgKHRoaXMuZGl2Xy5zdHlsZS5vcGFjaXR5ICogMTAwKSArIFwiKVxcXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXZfLnN0eWxlLmZpbHRlciA9IFwiYWxwaGEob3BhY2l0eT1cIiArICh0aGlzLmRpdl8uc3R5bGUub3BhY2l0eSAqIDEwMCkgKyBcIilcIjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBBcHBseSByZXF1aXJlZCBzdHlsZXM6XG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICB0aGlzLmRpdl8uc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXZfLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICAgICAgICAgICAgICBpZiAodGhpcy56SW5kZXhfICE9PSBudWxsKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXZfLnN0eWxlLnpJbmRleCA9IHRoaXMuekluZGV4XztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldCB0aGUgd2lkdGhzIG9mIHRoZSBib3JkZXJzIG9mIHRoZSBJbmZvQm94LlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAcmV0dXJuIHtPYmplY3R9IHdpZHRocyBvYmplY3QgKHRvcCwgYm90dG9tIGxlZnQsIHJpZ2h0KVxuICAgICAgICAgKi9cbiAgICAgICAgSW5mb0JveC5wcm90b3R5cGUuZ2V0Qm94V2lkdGhzXyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgdmFyIGNvbXB1dGVkU3R5bGU7XG4gICAgICAgICAgICB2YXIgYncgPSB7IHRvcDogMCwgYm90dG9tOiAwLCBsZWZ0OiAwLCByaWdodDogMCB9O1xuICAgICAgICAgICAgdmFyIGJveCA9IHRoaXMuZGl2XztcblxuICAgICAgICAgICAgaWYgKGRvY3VtZW50LmRlZmF1bHRWaWV3ICYmIGRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUpIHtcblxuICAgICAgICAgICAgICAgIGNvbXB1dGVkU3R5bGUgPSBib3gub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKGJveCwgXCJcIik7XG5cbiAgICAgICAgICAgICAgICBpZiAoY29tcHV0ZWRTdHlsZSkge1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBjb21wdXRlZCBzdHlsZXMgYXJlIGFsd2F5cyBpbiBwaXhlbCB1bml0cyAoZ29vZCEpXG4gICAgICAgICAgICAgICAgICAgIGJ3LnRvcCA9IHBhcnNlSW50KGNvbXB1dGVkU3R5bGUuYm9yZGVyVG9wV2lkdGgsIDEwKSB8fCAwO1xuICAgICAgICAgICAgICAgICAgICBidy5ib3R0b20gPSBwYXJzZUludChjb21wdXRlZFN0eWxlLmJvcmRlckJvdHRvbVdpZHRoLCAxMCkgfHwgMDtcbiAgICAgICAgICAgICAgICAgICAgYncubGVmdCA9IHBhcnNlSW50KGNvbXB1dGVkU3R5bGUuYm9yZGVyTGVmdFdpZHRoLCAxMCkgfHwgMDtcbiAgICAgICAgICAgICAgICAgICAgYncucmlnaHQgPSBwYXJzZUludChjb21wdXRlZFN0eWxlLmJvcmRlclJpZ2h0V2lkdGgsIDEwKSB8fCAwO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSBlbHNlIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY3VycmVudFN0eWxlKSB7IC8vIE1TSUVcblxuICAgICAgICAgICAgICAgIGlmIChib3guY3VycmVudFN0eWxlKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGN1cnJlbnQgc3R5bGVzIG1heSBub3QgYmUgaW4gcGl4ZWwgdW5pdHMsIGJ1dCBhc3N1bWUgdGhleSBhcmUgKGJhZCEpXG4gICAgICAgICAgICAgICAgICAgIGJ3LnRvcCA9IHBhcnNlSW50KGJveC5jdXJyZW50U3R5bGUuYm9yZGVyVG9wV2lkdGgsIDEwKSB8fCAwO1xuICAgICAgICAgICAgICAgICAgICBidy5ib3R0b20gPSBwYXJzZUludChib3guY3VycmVudFN0eWxlLmJvcmRlckJvdHRvbVdpZHRoLCAxMCkgfHwgMDtcbiAgICAgICAgICAgICAgICAgICAgYncubGVmdCA9IHBhcnNlSW50KGJveC5jdXJyZW50U3R5bGUuYm9yZGVyTGVmdFdpZHRoLCAxMCkgfHwgMDtcbiAgICAgICAgICAgICAgICAgICAgYncucmlnaHQgPSBwYXJzZUludChib3guY3VycmVudFN0eWxlLmJvcmRlclJpZ2h0V2lkdGgsIDEwKSB8fCAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGJ3O1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbnZva2VkIHdoZW4gPHR0PmNsb3NlPC90dD4gaXMgY2FsbGVkLiBEbyBub3QgY2FsbCBpdCBkaXJlY3RseS5cbiAgICAgICAgICovXG4gICAgICAgIEluZm9Cb3gucHJvdG90eXBlLm9uUmVtb3ZlID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBpZiAodGhpcy5kaXZfKSB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmRpdl8ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmRpdl8pO1xuICAgICAgICAgICAgICAgIHRoaXMuZGl2XyA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERyYXdzIHRoZSBJbmZvQm94IGJhc2VkIG9uIHRoZSBjdXJyZW50IG1hcCBwcm9qZWN0aW9uIGFuZCB6b29tIGxldmVsLlxuICAgICAgICAgKi9cbiAgICAgICAgSW5mb0JveC5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgdGhpcy5jcmVhdGVJbmZvQm94RGl2XygpO1xuXG4gICAgICAgICAgICB2YXIgcGl4UG9zaXRpb24gPSB0aGlzLmdldFByb2plY3Rpb24oKS5mcm9tTGF0TG5nVG9EaXZQaXhlbCh0aGlzLnBvc2l0aW9uXyk7XG5cbiAgICAgICAgICAgIHRoaXMuZGl2Xy5zdHlsZS5sZWZ0ID0gKHBpeFBvc2l0aW9uLnggKyB0aGlzLnBpeGVsT2Zmc2V0Xy53aWR0aCkgKyBcInB4XCI7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmFsaWduQm90dG9tXykge1xuICAgICAgICAgICAgICAgIHRoaXMuZGl2Xy5zdHlsZS5ib3R0b20gPSAtKHBpeFBvc2l0aW9uLnkgKyB0aGlzLnBpeGVsT2Zmc2V0Xy5oZWlnaHQpICsgXCJweFwiO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRpdl8uc3R5bGUudG9wID0gKHBpeFBvc2l0aW9uLnkgKyB0aGlzLnBpeGVsT2Zmc2V0Xy5oZWlnaHQpICsgXCJweFwiO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5pc0hpZGRlbl8pIHtcblxuICAgICAgICAgICAgICAgIHRoaXMuZGl2Xy5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcblxuICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgIHRoaXMuZGl2Xy5zdHlsZS52aXNpYmlsaXR5ID0gXCJ2aXNpYmxlXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgdGhlIG9wdGlvbnMgZm9yIHRoZSBJbmZvQm94LiBOb3RlIHRoYXQgY2hhbmdlcyB0byB0aGUgPHR0Pm1heFdpZHRoPC90dD4sXG4gICAgICAgICAqICA8dHQ+Y2xvc2VCb3hNYXJnaW48L3R0PiwgPHR0PmNsb3NlQm94VGl0bGU8L3R0PiwgPHR0PmNsb3NlQm94VVJMPC90dD4sIGFuZFxuICAgICAgICAgKiAgPHR0PmVuYWJsZUV2ZW50UHJvcGFnYXRpb248L3R0PiBwcm9wZXJ0aWVzIGhhdmUgbm8gYWZmZWN0IHVudGlsIHRoZSBjdXJyZW50XG4gICAgICAgICAqICBJbmZvQm94IGlzIDx0dD5jbG9zZTwvdHQ+ZCBhbmQgYSBuZXcgb25lIGlzIDx0dD5vcGVuPC90dD5lZC5cbiAgICAgICAgICogQHBhcmFtIHtJbmZvQm94T3B0aW9uc30gb3B0X29wdHNcbiAgICAgICAgICovXG4gICAgICAgIEluZm9Cb3gucHJvdG90eXBlLnNldE9wdGlvbnMgPSBmdW5jdGlvbiAob3B0X29wdHMpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0X29wdHMuYm94Q2xhc3MgIT09IFwidW5kZWZpbmVkXCIpIHsgLy8gTXVzdCBiZSBmaXJzdFxuXG4gICAgICAgICAgICAgICAgdGhpcy5ib3hDbGFzc18gPSBvcHRfb3B0cy5ib3hDbGFzcztcbiAgICAgICAgICAgICAgICB0aGlzLnNldEJveFN0eWxlXygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRfb3B0cy5ib3hTdHlsZSAhPT0gXCJ1bmRlZmluZWRcIikgeyAvLyBNdXN0IGJlIHNlY29uZFxuXG4gICAgICAgICAgICAgICAgdGhpcy5ib3hTdHlsZV8gPSBvcHRfb3B0cy5ib3hTdHlsZTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEJveFN0eWxlXygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRfb3B0cy5jb250ZW50ICE9PSBcInVuZGVmaW5lZFwiKSB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnNldENvbnRlbnQob3B0X29wdHMuY29udGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdF9vcHRzLmRpc2FibGVBdXRvUGFuICE9PSBcInVuZGVmaW5lZFwiKSB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGVBdXRvUGFuXyA9IG9wdF9vcHRzLmRpc2FibGVBdXRvUGFuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRfb3B0cy5tYXhXaWR0aCAhPT0gXCJ1bmRlZmluZWRcIikge1xuXG4gICAgICAgICAgICAgICAgdGhpcy5tYXhXaWR0aF8gPSBvcHRfb3B0cy5tYXhXaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0X29wdHMucGl4ZWxPZmZzZXQgIT09IFwidW5kZWZpbmVkXCIpIHtcblxuICAgICAgICAgICAgICAgIHRoaXMucGl4ZWxPZmZzZXRfID0gb3B0X29wdHMucGl4ZWxPZmZzZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdF9vcHRzLmFsaWduQm90dG9tICE9PSBcInVuZGVmaW5lZFwiKSB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmFsaWduQm90dG9tXyA9IG9wdF9vcHRzLmFsaWduQm90dG9tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRfb3B0cy5wb3NpdGlvbiAhPT0gXCJ1bmRlZmluZWRcIikge1xuXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRQb3NpdGlvbihvcHRfb3B0cy5wb3NpdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdF9vcHRzLnpJbmRleCAhPT0gXCJ1bmRlZmluZWRcIikge1xuXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRaSW5kZXgob3B0X29wdHMuekluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0X29wdHMuY2xvc2VCb3hNYXJnaW4gIT09IFwidW5kZWZpbmVkXCIpIHtcblxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VCb3hNYXJnaW5fID0gb3B0X29wdHMuY2xvc2VCb3hNYXJnaW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdF9vcHRzLmNsb3NlQm94VVJMICE9PSBcInVuZGVmaW5lZFwiKSB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlQm94VVJMXyA9IG9wdF9vcHRzLmNsb3NlQm94VVJMO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRfb3B0cy5jbG9zZUJveFRpdGxlICE9PSBcInVuZGVmaW5lZFwiKSB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlQm94VGl0bGVfID0gb3B0X29wdHMuY2xvc2VCb3hUaXRsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0X29wdHMuaW5mb0JveENsZWFyYW5jZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuXG4gICAgICAgICAgICAgICAgdGhpcy5pbmZvQm94Q2xlYXJhbmNlXyA9IG9wdF9vcHRzLmluZm9Cb3hDbGVhcmFuY2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdF9vcHRzLmlzSGlkZGVuICE9PSBcInVuZGVmaW5lZFwiKSB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmlzSGlkZGVuXyA9IG9wdF9vcHRzLmlzSGlkZGVuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRfb3B0cy52aXNpYmxlICE9PSBcInVuZGVmaW5lZFwiKSB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmlzSGlkZGVuXyA9ICFvcHRfb3B0cy52aXNpYmxlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRfb3B0cy5lbmFibGVFdmVudFByb3BhZ2F0aW9uICE9PSBcInVuZGVmaW5lZFwiKSB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmVuYWJsZUV2ZW50UHJvcGFnYXRpb25fID0gb3B0X29wdHMuZW5hYmxlRXZlbnRQcm9wYWdhdGlvbjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMuZGl2Xykge1xuXG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgdGhlIGNvbnRlbnQgb2YgdGhlIEluZm9Cb3guXG4gICAgICAgICAqICBUaGUgY29udGVudCBjYW4gYmUgcGxhaW4gdGV4dCBvciBhbiBIVE1MIERPTSBub2RlLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ3xOb2RlfSBjb250ZW50XG4gICAgICAgICAqL1xuICAgICAgICBJbmZvQm94LnByb3RvdHlwZS5zZXRDb250ZW50ID0gZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGVudF8gPSBjb250ZW50O1xuXG4gICAgICAgICAgICBpZiAodGhpcy5kaXZfKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jbG9zZUxpc3RlbmVyXykge1xuXG4gICAgICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LnJlbW92ZUxpc3RlbmVyKHRoaXMuY2xvc2VMaXN0ZW5lcl8pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlTGlzdGVuZXJfID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBPZGQgY29kZSByZXF1aXJlZCB0byBtYWtlIHRoaW5ncyB3b3JrIHdpdGggTVNJRS5cbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5maXhlZFdpZHRoU2V0Xykge1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGl2Xy5zdHlsZS53aWR0aCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb250ZW50Lm5vZGVUeXBlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGl2Xy5pbm5lckhUTUwgPSB0aGlzLmdldENsb3NlQm94SW1nXygpICsgY29udGVudDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpdl8uaW5uZXJIVE1MID0gdGhpcy5nZXRDbG9zZUJveEltZ18oKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXZfLmFwcGVuZENoaWxkKGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFBlcnZlcnNlIGNvZGUgcmVxdWlyZWQgdG8gbWFrZSB0aGluZ3Mgd29yayB3aXRoIE1TSUUuXG4gICAgICAgICAgICAgICAgLy8gKEVuc3VyZXMgdGhlIGNsb3NlIGJveCBkb2VzLCBpbiBmYWN0LCBmbG9hdCB0byB0aGUgcmlnaHQuKVxuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmZpeGVkV2lkdGhTZXRfKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGl2Xy5zdHlsZS53aWR0aCA9IHRoaXMuZGl2Xy5vZmZzZXRXaWR0aCArIFwicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb250ZW50Lm5vZGVUeXBlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpdl8uaW5uZXJIVE1MID0gdGhpcy5nZXRDbG9zZUJveEltZ18oKSArIGNvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpdl8uaW5uZXJIVE1MID0gdGhpcy5nZXRDbG9zZUJveEltZ18oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGl2Xy5hcHBlbmRDaGlsZChjb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuYWRkQ2xpY2tIYW5kbGVyXygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRoaXMgZXZlbnQgaXMgZmlyZWQgd2hlbiB0aGUgY29udGVudCBvZiB0aGUgSW5mb0JveCBjaGFuZ2VzLlxuICAgICAgICAgICAgICogQG5hbWUgSW5mb0JveCNjb250ZW50X2NoYW5nZWRcbiAgICAgICAgICAgICAqIEBldmVudFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKHRoaXMsIFwiY29udGVudF9jaGFuZ2VkXCIpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXRzIHRoZSBnZW9ncmFwaGljIGxvY2F0aW9uIG9mIHRoZSBJbmZvQm94LlxuICAgICAgICAgKiBAcGFyYW0ge0xhdExuZ30gbGF0bG5nXG4gICAgICAgICAqL1xuICAgICAgICBJbmZvQm94LnByb3RvdHlwZS5zZXRQb3NpdGlvbiA9IGZ1bmN0aW9uIChsYXRsbmcpIHtcblxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbl8gPSBsYXRsbmc7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmRpdl8pIHtcblxuICAgICAgICAgICAgICAgIHRoaXMuZHJhdygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRoaXMgZXZlbnQgaXMgZmlyZWQgd2hlbiB0aGUgcG9zaXRpb24gb2YgdGhlIEluZm9Cb3ggY2hhbmdlcy5cbiAgICAgICAgICAgICAqIEBuYW1lIEluZm9Cb3gjcG9zaXRpb25fY2hhbmdlZFxuICAgICAgICAgICAgICogQGV2ZW50XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIodGhpcywgXCJwb3NpdGlvbl9jaGFuZ2VkXCIpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXRzIHRoZSB6SW5kZXggc3R5bGUgZm9yIHRoZSBJbmZvQm94LlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXhcbiAgICAgICAgICovXG4gICAgICAgIEluZm9Cb3gucHJvdG90eXBlLnNldFpJbmRleCA9IGZ1bmN0aW9uIChpbmRleCkge1xuXG4gICAgICAgICAgICB0aGlzLnpJbmRleF8gPSBpbmRleDtcblxuICAgICAgICAgICAgaWYgKHRoaXMuZGl2Xykge1xuXG4gICAgICAgICAgICAgICAgdGhpcy5kaXZfLnN0eWxlLnpJbmRleCA9IGluZGV4O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRoaXMgZXZlbnQgaXMgZmlyZWQgd2hlbiB0aGUgekluZGV4IG9mIHRoZSBJbmZvQm94IGNoYW5nZXMuXG4gICAgICAgICAgICAgKiBAbmFtZSBJbmZvQm94I3ppbmRleF9jaGFuZ2VkXG4gICAgICAgICAgICAgKiBAZXZlbnRcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcih0aGlzLCBcInppbmRleF9jaGFuZ2VkXCIpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXRzIHRoZSB2aXNpYmlsaXR5IG9mIHRoZSBJbmZvQm94LlxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzVmlzaWJsZVxuICAgICAgICAgKi9cbiAgICAgICAgSW5mb0JveC5wcm90b3R5cGUuc2V0VmlzaWJsZSA9IGZ1bmN0aW9uIChpc1Zpc2libGUpIHtcblxuICAgICAgICAgICAgdGhpcy5pc0hpZGRlbl8gPSAhaXNWaXNpYmxlO1xuICAgICAgICAgICAgaWYgKHRoaXMuZGl2Xykge1xuICAgICAgICAgICAgICAgIHRoaXMuZGl2Xy5zdHlsZS52aXNpYmlsaXR5ID0gKHRoaXMuaXNIaWRkZW5fID8gXCJoaWRkZW5cIiA6IFwidmlzaWJsZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyB0aGUgY29udGVudCBvZiB0aGUgSW5mb0JveC5cbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIEluZm9Cb3gucHJvdG90eXBlLmdldENvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRfO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIHRoZSBnZW9ncmFwaGljIGxvY2F0aW9uIG9mIHRoZSBJbmZvQm94LlxuICAgICAgICAgKiBAcmV0dXJucyB7TGF0TG5nfVxuICAgICAgICAgKi9cbiAgICAgICAgSW5mb0JveC5wcm90b3R5cGUuZ2V0UG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uXztcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyB0aGUgekluZGV4IGZvciB0aGUgSW5mb0JveC5cbiAgICAgICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIEluZm9Cb3gucHJvdG90eXBlLmdldFpJbmRleCA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuekluZGV4XztcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyBhIGZsYWcgaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBJbmZvQm94IGlzIHZpc2libGUuXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgSW5mb0JveC5wcm90b3R5cGUuZ2V0VmlzaWJsZSA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgdmFyIGlzVmlzaWJsZTtcblxuICAgICAgICAgICAgaWYgKCh0eXBlb2YgdGhpcy5nZXRNYXAoKSA9PT0gXCJ1bmRlZmluZWRcIikgfHwgKHRoaXMuZ2V0TWFwKCkgPT09IG51bGwpKSB7XG4gICAgICAgICAgICAgICAgaXNWaXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlzVmlzaWJsZSA9ICF0aGlzLmlzSGlkZGVuXztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpc1Zpc2libGU7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdGhlIHdpZHRoIG9mIHRoZSBJbmZvQm94IGluIHBpeGVscy5cbiAgICAgICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIEluZm9Cb3gucHJvdG90eXBlLmdldFdpZHRoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gbnVsbDtcblxuICAgICAgICAgICAgaWYgKHRoaXMuZGl2Xykge1xuICAgICAgICAgICAgICAgIHdpZHRoID0gdGhpcy5kaXZfLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gd2lkdGg7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdGhlIGhlaWdodCBvZiB0aGUgSW5mb0JveCBpbiBwaXhlbHMuXG4gICAgICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBJbmZvQm94LnByb3RvdHlwZS5nZXRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaGVpZ2h0ID0gbnVsbDtcblxuICAgICAgICAgICAgaWYgKHRoaXMuZGl2Xykge1xuICAgICAgICAgICAgICAgIGhlaWdodCA9IHRoaXMuZGl2Xy5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBoZWlnaHQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNob3dzIHRoZSBJbmZvQm94LiBbRGVwcmVjYXRlZDsgdXNlIDx0dD5zZXRWaXNpYmxlPC90dD4gaW5zdGVhZC5dXG4gICAgICAgICAqL1xuICAgICAgICBJbmZvQm94LnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICB0aGlzLmlzSGlkZGVuXyA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHRoaXMuZGl2Xykge1xuICAgICAgICAgICAgICAgIHRoaXMuZGl2Xy5zdHlsZS52aXNpYmlsaXR5ID0gXCJ2aXNpYmxlXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhpZGVzIHRoZSBJbmZvQm94LiBbRGVwcmVjYXRlZDsgdXNlIDx0dD5zZXRWaXNpYmxlPC90dD4gaW5zdGVhZC5dXG4gICAgICAgICAqL1xuICAgICAgICBJbmZvQm94LnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICB0aGlzLmlzSGlkZGVuXyA9IHRydWU7XG4gICAgICAgICAgICBpZiAodGhpcy5kaXZfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXZfLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBZGRzIHRoZSBJbmZvQm94IHRvIHRoZSBzcGVjaWZpZWQgbWFwIG9yIFN0cmVldCBWaWV3IHBhbm9yYW1hLiBJZiA8dHQ+YW5jaG9yPC90dD5cbiAgICAgICAgICogICh1c3VhbGx5IGEgPHR0Pmdvb2dsZS5tYXBzLk1hcmtlcjwvdHQ+KSBpcyBzcGVjaWZpZWQsIHRoZSBwb3NpdGlvblxuICAgICAgICAgKiAgb2YgdGhlIEluZm9Cb3ggaXMgc2V0IHRvIHRoZSBwb3NpdGlvbiBvZiB0aGUgPHR0PmFuY2hvcjwvdHQ+LiBJZiB0aGVcbiAgICAgICAgICogIGFuY2hvciBpcyBkcmFnZ2VkIHRvIGEgbmV3IGxvY2F0aW9uLCB0aGUgSW5mb0JveCBtb3ZlcyBhcyB3ZWxsLlxuICAgICAgICAgKiBAcGFyYW0ge01hcHxTdHJlZXRWaWV3UGFub3JhbWF9IG1hcFxuICAgICAgICAgKiBAcGFyYW0ge01WQ09iamVjdH0gW2FuY2hvcl1cbiAgICAgICAgICovXG4gICAgICAgIEluZm9Cb3gucHJvdG90eXBlLm9wZW4gPSBmdW5jdGlvbiAobWFwLCBhbmNob3IpIHtcblxuICAgICAgICAgICAgdmFyIG1lID0gdGhpcztcblxuICAgICAgICAgICAgaWYgKGFuY2hvcikge1xuXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRQb3NpdGlvbihhbmNob3IuZ2V0UG9zaXRpb24oKSk7IC8vIEJVRyBGSVggMi8xNy8yMDE4OiBuZWVkZWQgZm9yIHYzLjMyXG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlTGlzdGVuZXJfID0gZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIoYW5jaG9yLCBcInBvc2l0aW9uX2NoYW5nZWRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBtZS5zZXRQb3NpdGlvbih0aGlzLmdldFBvc2l0aW9uKCkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnNldE1hcChtYXApO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5kaXZfKSB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnBhbkJveF8odGhpcy5kaXNhYmxlQXV0b1Bhbl8pOyAvLyBCVUcgRklYIDIvMTcvMjAxODogYWRkIG1pc3NpbmcgcGFyYW1ldGVyXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlbW92ZXMgdGhlIEluZm9Cb3ggZnJvbSB0aGUgbWFwLlxuICAgICAgICAgKi9cbiAgICAgICAgSW5mb0JveC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIHZhciBpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5jbG9zZUxpc3RlbmVyXykge1xuXG4gICAgICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQucmVtb3ZlTGlzdGVuZXIodGhpcy5jbG9zZUxpc3RlbmVyXyk7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZUxpc3RlbmVyXyA9IG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmV2ZW50TGlzdGVuZXJzXykge1xuXG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuZXZlbnRMaXN0ZW5lcnNfLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQucmVtb3ZlTGlzdGVuZXIodGhpcy5ldmVudExpc3RlbmVyc19baV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50TGlzdGVuZXJzXyA9IG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLm1vdmVMaXN0ZW5lcl8pIHtcblxuICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LnJlbW92ZUxpc3RlbmVyKHRoaXMubW92ZUxpc3RlbmVyXyk7XG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlTGlzdGVuZXJfID0gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMuY29udGV4dExpc3RlbmVyXykge1xuXG4gICAgICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQucmVtb3ZlTGlzdGVuZXIodGhpcy5jb250ZXh0TGlzdGVuZXJfKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHRMaXN0ZW5lcl8gPSBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnNldE1hcChudWxsKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLkluZm9Cb3ggPSBJbmZvQm94O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBkZXNjcmlwdGlvbiBGb2N1cyBhIG1hcmtlciBvbiB0aGUgbWFwXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG1hcmtlcklkIC0gdGhlIGlkIG9mIHRoZSBtYXJrZXIgdG8gZm9jdXNcbiAgICAgKiBAbWVtYmVyb2YgR292TWFwXG4gICAgICovXG4gICAgZm9jdXNNYXJrZXIobWFya2VySWQpIHtcbiAgICAgICAgLy8gZ2V0IHRoZSBtYXJrZXIgaW5zdGFuY2UgdXNpbmcgdGhlIG1hcmtlcklkIHBhc3NlZCBpblxuICAgICAgICBjb25zdCBtYXJrZXJUb0ZvY3VzID0gdGhpcy5fbWFya2VySW5zdGFuY2VzLmZpbmQobWFya2VyID0+IHtcbiAgICAgICAgICAgIHJldHVybiBtYXJrZXIuaWQgPT09IG1hcmtlcklkXG4gICAgICAgIH0pXG5cbiAgICAgICAgLy8gaWYgd2UgZmluZCBhIG1hcmtlciwgcGFuIHRvIHRoZSBtYXJrZXJzIHBvc2l0aW9uXG4gICAgICAgIGlmIChtYXJrZXJUb0ZvY3VzKSB7XG4gICAgICAgICAgICB0aGlzLl9tYXBJbnN0YW5jZS5wYW5UbyhtYXJrZXJUb0ZvY3VzLnBvc2l0aW9uKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIGNyZWF0ZSBhIGdvb2dsZSBtYXBzIGljb24gY29uZmlnIG9iamVjdCB0aGF0IGlzIHVzZWQgYnkgdGhlIG1hcmtlclxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IC0gZ29vZ2xlIG1hcHMgSWNvbiBjb25maWdcbiAgICAgKiBAbWVtYmVyb2YgR292TWFwXG4gICAgICovXG4gICAgZ2V0SWNvbkNvbmZpZyhtYXJrZXIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRpdGxlOiBtYXJrZXIubmFtZSxcbiAgICAgICAgICAgIHVybDogbWFya2VyLmljb24sIC8vIHVybFxuICAgICAgICAgICAgc2NhbGVkU2l6ZTogbmV3IGdvb2dsZS5tYXBzLlNpemUoMzUsIDM1KSwgLy8gc2NhbGVkIHNpemVcbiAgICAgICAgICAgIC8vIGFuY2hvcjogbmV3IGdvb2dsZS5tYXBzLlBvaW50KDAsIDApIC8vIGFuY2hvclxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIGdldCB0aGUgY29sbGVjdGlvbiBvZiBLTUxzIG9uIHRoZSBtYXAgY29uZmlnXG4gICAgICogQHJldHVybnMge0FycmF5fSAtIGNvbGxlY3Rpb24gb2YgS01McyBmcm9tIHRoZSBtYXAgY29uZmlnXG4gICAgICogQG1lbWJlcm9mIEdvdk1hcFxuICAgICAqL1xuICAgIGdldEtNTHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuX2ttbExheWVyc1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBkZXNjcmlwdGlvbiBnZXQgdGhlIGNvbGxlY3Rpb24gb2YgbWFya2VycyBvbiB0aGUgbWFwIGNvbmZpZ1xuICAgICAqIEByZXR1cm5zIHtBcnJheX0gLSBjb2xsZWN0aW9uIG9mIG1hcmtlcnMgZnJvbSB0aGUgbWFwIGNvbmZpZ1xuICAgICAqIEBtZW1iZXJvZiBHb3ZNYXBcbiAgICAgKi9cbiAgICBnZXRNYXJrZXJzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLm1hcmtlcnNcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZGVzY3JpcHRpb24gZ2V0IHRoZSBjb2xsZWN0aW9uIG9mIG1hcmtlciBpbnN0YW5jZXMgY3JlYXRlZCBmb3IgdGhlIG1hcFxuICAgICAqIEByZXR1cm5zIHtBcnJheX0gLSBjb2xsZWN0aW9uIG9mIG1hcmtlciBpbnN0YW5jZXNcbiAgICAgKiBAbWVtYmVyb2YgR292TWFwXG4gICAgICovXG4gICAgZ2V0TWFya2VySW5zdGFuY2VzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbWFya2VySW5zdGFuY2VzXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIGxvb3Agb3ZlciBtYXJrZXJzIGluIHRoZSBtYXAgY29uZmlnIGFuZCBidWlsZCBhIGxpc3Qgb2ZcbiAgICAgKiB1bmlxdWUgbWFya2VyIHR5cGVzXG4gICAgICogQHJldHVybnMge0FycmF5fSAtIGNvbGxlY3Rpb24gb2YgbWFya2VyVHlwZXNcbiAgICAgKiBAbWVtYmVyb2YgR292TWFwXG4gICAgICovXG4gICAgZ2V0TWFya2VyVHlwZXMoKSB7XG4gICAgICAgIGNvbnN0IG1hcmtlclR5cGVzID0ge31cbiAgICAgICAgdGhpcy5vcHRpb25zLm1hcmtlcnMuZm9yRWFjaChtYXJrZXIgPT4ge1xuICAgICAgICAgICAgaWYgKCFtYXJrZXJUeXBlc1ttYXJrZXIudHlwZS5faWRdKSB7XG4gICAgICAgICAgICAgICAgbWFya2VyVHlwZXNbbWFya2VyLnR5cGUuX2lkXSA9IG1hcmtlci50eXBlXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBtYXJrZXJUeXBlc1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBkZXNjcmlwdGlvbiBIaWRlIGFsbCBtYXJrZXJzIHdpdGggdGhlIHNwZWNpZmllZCBtYXJrZXIgdHlwZSBpZFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlSWQgLSB0aGUgaWQgb2YgdGhlIG1hcmtlciB0eXBlIHRvIGhpZGVcbiAgICAgKiBAbWVtYmVyb2YgR292TWFwXG4gICAgICovXG4gICAgaGlkZU1hcmtlcnNCeVR5cGUodHlwZUlkKSB7XG4gICAgICAgIHRoaXMuX21hcmtlckluc3RhbmNlcy5mb3JFYWNoKG1hcmtlciA9PiB7XG4gICAgICAgICAgICBpZiAobWFya2VyLnR5cGUgPT09IHR5cGVJZCkge1xuICAgICAgICAgICAgICAgIG1hcmtlci5zZXRNYXAobnVsbClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZGVzY3JpcHRpb24gYWRkIG1hcmtlciB0byBtYXAgYXQgc3BlY2lmaWVkIGxhdCBhbmQgbG5nXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gbWFya2VyIGdvdmVybm9yIG1hcmtlciBjb25maWdcbiAgICAgKiBAcGFyYW0ge2dvb2dsZS5tYXBzLk1hcH0gbWFwIGdvb2dsZSBtYXBzIE1hcFxuICAgICAqIEByZXR1cm5zIHtnb29nbGUubWFwcy5NYXJrZXJ9IGdvb2dsZSBtYXBzIE1hcmtlclxuICAgICAqIEBtZW1iZXJvZiBHb3ZNYXBcbiAgICAgKi9cbiAgICBwbGFjZU1hcmtlcihtYXJrZXIsIG1hcCkge1xuICAgICAgICBjb25zdCBjb25maWcgPSB7XG4gICAgICAgICAgICB0aXRsZTogbWFya2VyLm5hbWUsXG4gICAgICAgICAgICBwb3NpdGlvbjogbWFya2VyLmxvY2F0aW9uLFxuICAgICAgICAgICAgdHlwZTogbWFya2VyLnR5cGUuX2lkLFxuICAgICAgICAgICAgaWQ6IG1hcmtlci5faWQsXG4gICAgICAgICAgICBtYXA6IG1hcFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG1hcmtlci5pY29uKSB7XG4gICAgICAgICAgICBsZXQgaWNvbiA9IHRoaXMuZ2V0SWNvbkNvbmZpZyhtYXJrZXIpXG4gICAgICAgICAgICBjb25maWcuaWNvbiA9IGljb25cblxuICAgICAgICAgICAgaWYgKG1hcmtlci50eXBlICYmIG1hcmtlci50eXBlLnNjYWxlZFNpemUpIHtcbiAgICAgICAgICAgICAgICBjb25maWcuc2NhbGVkU2l6ZSA9IG1hcmtlci50eXBlLnNjYWxlZFNpemVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKGNvbmZpZylcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZGVzY3JpcHRpb24gY3JlYXRlcyBhIGBLbWxMYXllcmAgZm9yIGFsbCBvZiB0aGUgZ292ZXJub3IgbWFwc1xuICAgICAqIHNlbGVjdGVkIEtNTCBmaWxlc1xuICAgICAqIEBwYXJhbSB7Z29vZ2xlLm1hcHMuTWFwfSBtYXAgLSBUaGUgbWFwIHRvIGFkZCB0aGUgS01MIGxheWVycyB0b1xuICAgICAqIEByZXR1cm5zIHtBcnJheX0gY29sbGVjdGlvbiBvZiBLTUwgbGF5ZXIgaW50YW5jZXNcbiAgICAgKiBAbWVtYmVyb2YgR292TWFwXG4gICAgICovXG4gICAgc2V0dXBLbWxzKG1hcCkge1xuICAgICAgICBjb25zdCBrbWxMYXllcnMgPSBbXVxuICAgICAgICBsZXQgY3VycmVudExheWVyXG5cbiAgICAgICAgLy8gbG9vcCB0aHJvdWdoIHRoZSBrbWwgaWRzIG9uIHRoZSBtYXBcbiAgICAgICAgdGhpcy5jb25maWcua21scy5mb3JFYWNoKGN1cnJlbnRLbWwgPT4ge1xuICAgICAgICAgICAgLy8gaWYgb25lIGV4aXN0cywgY3JlYXRlIGEga21sIGxheWVyIGFuZCBhZGQgaXQgdG8gdGhlIG1hcFxuICAgICAgICAgICAgaWYgKGN1cnJlbnRLbWwpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50TGF5ZXIgPSBuZXcgZ29vZ2xlLm1hcHMuS21sTGF5ZXIoe1xuICAgICAgICAgICAgICAgICAgICB1cmw6IGN1cnJlbnRLbWwua21sRmlsZSxcbiAgICAgICAgICAgICAgICAgICAgbWFwOiBtYXAsXG4gICAgICAgICAgICAgICAgICAgIHByZXNlcnZlVmlld3BvcnQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGN1cnJlbnRLbWwubmFtZVxuICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICAvLyBzdG9yZSB0aGUgbGF5ZXJcbiAgICAgICAgICAgICAgICBrbWxMYXllcnMucHVzaChjdXJyZW50TGF5ZXIpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBrbWxMYXllcnNcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIGJ1aWxkIGEgZ29vZ2xlIG1hcHMgbWFya2VyIGZvciBlYWNoIG9mIHRoZVxuICAgICAqIG1hcmtlcnMgY29uZmlnc1xuICAgICAqIEBwYXJhbSB7Z29vZ2xlLm1hcHMuTWFwfSBtYXAgLSBUaGUgbWFwIHRvIGFkZCB0aGUgbWFya2VycyB0b1xuICAgICAqIEByZXR1cm5zIHtBcnJheX0gY29sbGVjdGlvbiBvZiBtYXJrZXIgaW50YW5jZXNcbiAgICAgKiBAbWVtYmVyb2YgR292TWFwXG4gICAgICovXG4gICAgc2V0dXBNYXJrZXJzKG1hcCkge1xuICAgICAgICBjb25zdCBtYXJrZXJJbnN0YW5jZXMgPSBbXVxuICAgICAgICBsZXQgbWFya2VySW5zdGFuY2VcbiAgICAgICAgdGhpcy5jb25maWcubWFya2Vycy5mb3JFYWNoKG1hcmtlciA9PiB7XG4gICAgICAgICAgICBpZiAobWFya2VyLnNob3cpIHtcbiAgICAgICAgICAgICAgICAvLyBjcmVhdGUgYSBnb29nbGUgbWFwcyBtYXJrZXIgdXNpbmcgdGhlIGdvdmVybm9yIG1hcmtlciBjb25maWdcbiAgICAgICAgICAgICAgICBtYXJrZXJJbnN0YW5jZSA9IHRoaXMuYnVpbGRNYXJrZXIobWFya2VyLCBtYXApXG5cbiAgICAgICAgICAgICAgICAvLyBleHRlbmQgdGhlIGJvdW5kcyB3aXRoIHRoZSBtYXJrZXJzIHBvc2l0aW9uXG4gICAgICAgICAgICAgICAgLy8gdGhpcyBhbGxvd3MgdXMgdG8gZml0IGFsbCB0aGUgbWFya2VycyBpbnRvIHZpZXdcbiAgICAgICAgICAgICAgICB0aGlzLmJvdW5kcy5leHRlbmQobWFya2VySW5zdGFuY2UuZ2V0UG9zaXRpb24oKSlcblxuICAgICAgICAgICAgICAgIC8vIHN0b3JlIHRoZSBtYXJrZXIgaW5zdGFuY2VcbiAgICAgICAgICAgICAgICBtYXJrZXJJbnN0YW5jZXMucHVzaChtYXJrZXJJbnN0YW5jZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIG1hcmtlckluc3RhbmNlc1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBkZXNjcmlwdGlvbiBTaG93IGFsbCBtYXJrZXJzIHdpdGggY29ycmVzcG9uZGluZyB0eXBlIGlkc1xuICAgICAqIEBwYXJhbSB7QXJyYXl9IHZpc2libGVUeXBlSWRzIC0gY29sbGVjdGlvbiBvZiB0eXBlSWRzIHRvIHNob3cgb24gdGhlIG1hcFxuICAgICAqIEBtZW1iZXJvZiBHb3ZNYXBcbiAgICAgKi9cbiAgICBzZXRWaXNpYmxlTWFya2Vyc0J5VHlwZSh2aXNpYmxlVHlwZUlkcykge1xuICAgICAgICBjb25zdCBuZXdCb3VuZHMgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nQm91bmRzKClcbiAgICAgICAgaWYgKHZpc2libGVUeXBlSWRzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5fbWFya2VySW5zdGFuY2VzLmZvckVhY2gobWFya2VyID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodmlzaWJsZVR5cGVJZHMuaW5jbHVkZXMobWFya2VyLnR5cGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hcmtlci5zZXRNYXAodGhpcy5fbWFwSW5zdGFuY2UpXG4gICAgICAgICAgICAgICAgICAgIG5ld0JvdW5kcy5leHRlbmQobWFya2VyLmdldFBvc2l0aW9uKCkpXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbWFya2VyLnNldE1hcChudWxsKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl9tYXBJbnN0YW5jZS5maXRCb3VuZHMobmV3Qm91bmRzKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIHNob3cgYWxsXG4gICAgICAgICAgICB0aGlzLnNob3dBbGxNYXJrZXJzKClcbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIFNob3cgYWxsIHRoZSBtYXJrZXJzIGFzc29jaWF0ZWQgd2l0aCB0aGUgbWFwXG4gICAgICogQG1lbWJlcm9mIEdvdk1hcFxuICAgICAqL1xuICAgIHNob3dBbGxNYXJrZXJzKCkge1xuICAgICAgICB0aGlzLl9tYXJrZXJJbnN0YW5jZXMuZm9yRWFjaChtYXJrZXIgPT4ge1xuICAgICAgICAgICAgbWFya2VyLnNldE1hcCh0aGlzLl9tYXBJbnN0YW5jZSlcbiAgICAgICAgfSlcbiAgICB9XG59Il0sInNvdXJjZVJvb3QiOiIifQ==